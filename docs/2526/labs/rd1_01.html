<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Getting started with R and RStudio – DAPR1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-1fa1d8026083a9bddc52b4aafc7f818e.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-8e00f2f28a1266a720913de837032221.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-4823d056cc0a8309e077c97e601d5ea4.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-936f437bde601076d6706b684ef02b78.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="site_libs/quarto-contrib/videojs/video.min.js"></script>
<link href="site_libs/quarto-contrib/videojs/video-js.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script>
function toggle_visibility(id1, id2) {
var e = document.getElementById(id1);
var f = document.getElementById(id2);
e.style.display = ((e.style.display!='none') ? 'none' : 'block');
if(f.classList.contains('fa-chevron-circle-right')) {
    f.classList.add('fa-chevron-circle-down')
    f.classList.remove('fa-chevron-circle-right')
} else {
    f.classList.add('fa-chevron-circle-right')
    f.classList.remove('fa-chevron-circle-down')
}
}
</script><script src="https://kit.fontawesome.com/120b08a6f5.js" crossorigin="anonymous"></script><link rel="stylesheet" href="https://uoepsy.github.io/assets/css/ccfooter.css">
<link rel="stylesheet" href="assets/styles.css">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">DAPR1</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-lab-materials" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Lab Materials</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-lab-materials">
<li class="dropdown-header"><b>Block 1: Exploratory data analysis</b></li>
        <li>
    <a class="dropdown-item" href="./1_01_design_and_data.html">
 <span class="dropdown-text">S1-W1: Research design &amp; data</span></a>
  </li>  
    </ul>
</li>
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-readings" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Readings</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-readings">
<li class="dropdown-header"><b>Block 1: Exploratory data analysis</b></li>
        <li>
    <a class="dropdown-item" href="./rd1_01.html">
 <span class="dropdown-text">S1-W1: Getting started with R and RStudio</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li>
<a href="#getting-r-and-rstudio" id="toc-getting-r-and-rstudio" class="nav-link active" data-scroll-target="#getting-r-and-rstudio"><span class="header-section-number">1</span> Getting R and RStudio</a>
  <ul class="collapse">
<li><a href="#accessing-the-software" id="toc-accessing-the-software" class="nav-link" data-scroll-target="#accessing-the-software"><span class="header-section-number">1.1</span> Accessing the software</a></li>
  <li><a href="#setting-up-your-folder" id="toc-setting-up-your-folder" class="nav-link" data-scroll-target="#setting-up-your-folder"><span class="header-section-number">1.2</span> Setting up your folder</a></li>
  </ul>
</li>
  <li>
<a href="#a-first-look-at-rstudio" id="toc-a-first-look-at-rstudio" class="nav-link" data-scroll-target="#a-first-look-at-rstudio"><span class="header-section-number">2</span> A first look at RStudio</a>
  <ul class="collapse">
<li><a href="#r-as-a-calculator" id="toc-r-as-a-calculator" class="nav-link" data-scroll-target="#r-as-a-calculator"><span class="header-section-number">2.1</span> R as a calculator</a></li>
  <li><a href="#r-as-a-calculator-with-a-memory" id="toc-r-as-a-calculator-with-a-memory" class="nav-link" data-scroll-target="#r-as-a-calculator-with-a-memory"><span class="header-section-number">2.2</span> R as a calculator with a memory</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Getting started with R and RStudio</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="getting-r-and-rstudio" class="level2" data-number="1"><h2 data-number="1" class="anchored" data-anchor-id="getting-r-and-rstudio">
<span class="header-section-number">1</span> Getting R and RStudio</h2>
<section id="accessing-the-software" class="level3" data-number="1.1"><h3 data-number="1.1" class="anchored" data-anchor-id="accessing-the-software">
<span class="header-section-number">1.1</span> Accessing the software</h3>
<p><strong>Recommended option</strong>: access it via the RStudio Server Online:</p>
<ol type="a">
<li>Go to the course LEARN page.</li>
<li>Click “Quick Links”</li>
<li>Click “RStudio Server Online (by Noteable)”</li>
<li>Select “RStudio” from the dropdown menu</li>
<li>Click “Start”</li>
</ol>
<p><strong>Alternative</strong>: install it locally on your PC following <a href="https://uoepsy.github.io/files/install-update-r.html">these instructions</a>.</p>
</section><section id="setting-up-your-folder" class="level3" data-number="1.2"><h3 data-number="1.2" class="anchored" data-anchor-id="setting-up-your-folder">
<span class="header-section-number">1.2</span> Setting up your folder</h3>
<ul>
<li>Create a new folder on the server. Give it a useful name like the name of the course: DAPR1. (In the picture we have used “USMR” but please use “DAPR1”).</li>
</ul>
<p><img src="images/rstudio_intro/rstudioserver9.png" class="img-fluid"></p>
<ul>
<li>In the top right, click Project &gt; New Project</li>
</ul>
<p><img src="images/rstudio_intro/rstudioserver11.png" class="img-fluid"></p>
<ul>
<li>Click “Existing Directory”</li>
</ul>
<p><img src="images/rstudio_intro/rstudioserver12.png" class="img-fluid"></p>
<ul>
<li>Click “Browse” and then choose the folder you just created. Click “Choose” and then click “Create Project”.</li>
</ul>
<p><img src="images/rstudio_intro/rstudioserver15.png" class="img-fluid"></p>
<ul>
<li>You should now be able to tell that you have the project open, because it shows you in the top right.</li>
</ul>
<p><img src="images/rstudio_intro/rstudioserver17.png" class="img-fluid"></p>
<p>You’re ready to go!</p>
</section></section><section id="a-first-look-at-rstudio" class="level2" data-number="2"><h2 data-number="2" class="anchored" data-anchor-id="a-first-look-at-rstudio">
<span class="header-section-number">2</span> A first look at RStudio</h2>
<p>Okay, now you should have RStudio and a project open, and you should see something which looks more or less like the image below, where there are several little windows.</p>
<p><img src="images/rstudio_intro/freshr.png" class="img-fluid"></p>
<p>We are going to explore what each of these little windows offer by just diving in and starting to do things.</p>
<section id="r-as-a-calculator" class="level3" data-number="2.1"><h3 data-number="2.1" class="anchored" data-anchor-id="r-as-a-calculator">
<span class="header-section-number">2.1</span> R as a calculator</h3>
<p>Starting in the left-hand window, you’ll notice the blue sign &gt; which is where we R code gets <em>executed</em>.</p>
<p>Type 2+2, and hit Enter ↵. You should discover that R is a calculator.</p>
<p>Let’s work through some of the basic operations (adding, subtracting, etc). Try these commands yourself:</p>
<ul>
<li><code>2 + 5</code></li>
<li><code>10 - 4</code></li>
<li><code>2 * 5</code></li>
<li><code>10 - (2 * 5)</code></li>
<li><code>(10 - 2) * 5</code></li>
<li><code>10 / 2</code></li>
<li>
<code>3^2</code> (Hint, interpret the <code>^</code> symbol as “to the power of”)</li>
</ul>
<div class="callout callout-style-simple callout-tip">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>Whenever you see the blue sign &gt;, it means R is ready and waiting for you to provide a command.</p>
<p>If you type <code>10 +</code> and press Enter, you’ll see that instead of a blue &gt; you are left with a blue +. This means that R is waiting for more. Either give it more, or cancel the command by pressing the escape key on your keyboard.</p>
</div>
</div>
</div>
<p>As well as performing calculations, we can <em>ask</em> R things, such as “Is 3 less than 5?”:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fl">3</span> <span class="op">&lt;</span> <span class="fl">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>As the computation above returns TRUE, we notice that such questions return either TRUE or FALSE. These are not numbers and are called <em>logical</em> values.</p>
<p>Try the following:</p>
<ul>
<li>
<code>3 &gt; 5</code> “is 3 greater than 5?”</li>
<li>
<code>3 &lt;= 5</code> “is 3 less than or equal to 5?”</li>
<li>
<code>3 &gt;= 3</code> “is 3 greater than or equal to 3?”</li>
<li>
<code>3 == 5</code> “is 3 equal to 5?”</li>
<li>
<code>(2 * 5) == 10</code> “is 2 times 5 equal to 10?”</li>
<li>
<code>(2 * 5) != 11</code> “is 2 times 5 NOT equal to 11?”</li>
</ul></section><section id="r-as-a-calculator-with-a-memory" class="level3" data-number="2.2"><h3 data-number="2.2" class="anchored">
<span class="header-section-number">2.2</span> R as a calculator with a memory</h3>
<p>We can also store things in R’s memory, and to do that we just need to give them a name. Type <code>x &lt;- 5</code> and press Enter.</p>
<p>What has happened? We’ve just stored something named <code>x</code> which has the value <code>5</code>. We can now refer to the name and it will give us the value! Try typing <code>x</code> and hitting Enter. It should give you the number 5. What about <code>x * 3</code>?</p>
<div class="callout-info">
<section id="storing-things-in-r" class="level4" data-number="2.2.1"><h4 data-number="2.2.1" class="anchored" data-anchor-id="storing-things-in-r">
<span class="header-section-number">2.2.1</span> Storing things in R</h4>
<p>The <code>&lt;-</code> symbol, pronounced arrow, is used to <em>assign</em> a value to a named object:</p>
<p><code>[name] &lt;- [value]</code></p>
<p>Note, there are a few rules about names in R:</p>
<ul>
<li>No spaces - spaces <em>inside</em> a name are not allowed (the spaces around the <code>&lt;-</code> don’t matter):
<ul>
<li>
<code>lucky_number &lt;- 5</code> ✔   <code>lucky number &lt;- 5</code> ❌<br>
</li>
</ul>
</li>
<li>Names must start with a letter:
<ul>
<li>
<code>lucky_number &lt;- 5</code> ✔   <code>1lucky_number &lt;- 5</code> ❌<br>
</li>
</ul>
</li>
<li>Case sensitive:
<ul>
<li>
<code>lucky_number</code> is different from <code>Lucky_Number</code><br>
</li>
</ul>
</li>
<li>Reserved words - there is a set of words you can’t use as names, including: if, else, for, in, TRUE, FALSE, NULL, NA, NaN, function<br>
(Don’t worry about remembering these, R will tell you if you make the mistake of trying to name a variable after one of these).</li>
</ul>
<p>You might have noticed that something else happened when you executed the code <code>x &lt;- 5</code>. The thing we named <strong>x</strong> with a value of <strong>5</strong> suddenly appeared in the top-right window. This is known as the <strong>environment</strong>, and it shows everything that we store things in R:</p>
<p><img src="images/rstudio_intro/rassign.png" class="img-fluid"></p>
<p>We’ve now used a couple of the windows - we’ve been executing R code in the <strong>console</strong>, and learned about how we can store things in R’s memory (the <strong>environment</strong>) by assigning a name to them:</p>
<p><img src="images/rstudio_intro/r4panel2.png" class="img-fluid"></p>
<p>Notice that in the screenshot above, we have moved the <strong>console</strong> down to the bottom-left, and introduced a new window above it. This is the one that we’re going to talk about next.</p>
</section><section id="r-scripts-and-rmarkdown" class="level2" data-number="3"><h2 data-number="3" class="anchored" data-anchor-id="r-scripts-and-rmarkdown">
<span class="header-section-number">3</span> R scripts and Rmarkdown</h2>
<p>What if we want to edit our code? Whatever we write in the console just disappears upwards. What if we want to change things we did earlier on?</p>
<p>Well, we can write and edit our code in a separate place <em>before</em> sending it to the <strong>console</strong> to be executed!!</p>
<section id="r-scripts" class="level3" data-number="3.1"><h3 data-number="3.1" class="anchored" data-anchor-id="r-scripts">
<span class="header-section-number">3.1</span> R scripts</h3>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Open an R script
<ul>
<li><strong>File &gt; New File &gt; R script</strong></li>
</ul>
</li>
<li>Copy and paste the following into the R script</li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">210</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">15</span></span>
<span><span class="va">x</span> <span class="op">/</span> <span class="va">y</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="1">
<li>Position your text-cursor (blinking vertical line) on the top line and press:
<ul>
<li>Ctrl + Enter on Windows</li>
<li>Cmd + Enter on macOS</li>
</ul>
</li>
</ol>
</div>
</div>
<p>Notice what has happened - it has sent the command <code>x &lt;- 210</code> to the console, where it has been executed, and <strong>x</strong> is now in your environment. Additionally, it has moved the text-cursor to the next line.</p>
<p><img src="images/rstudio_intro/reditor.png" class="img-fluid"></p>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>Press Ctrl + Enter (Windows) or Cmd + Enter (macOS) again. Do it twice (this will run the next two lines).</p>
<p>Then, change <strong>x</strong> to some other number in your R script, and run the lines again (starting at the top).</p>
</div>
</div>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>Add the following line to your R script and execute it (send it to the console pressing Ctrl/Cmd + Enter):</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>A very basic plot should have appeared in the bottom-right of RStudio. The bottom-right window actually does some other useful things.</p>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Save the R script you have been working with:
<ul>
<li>File &gt; Save</li>
<li>give it an appropriate name, and click save.</li>
</ul>
</li>
<li>Check that you can now see that file in the file pane, by clicking on the “Files” tab of the bottom-right window.</li>
</ol>
</div>
</div>
<p><strong>NOTE:</strong> When you save R script files, they terminate with a .R extension.</p>
</section><section id="rmarkdown" class="level3" data-number="3.2"><h3 data-number="3.2" class="anchored" data-anchor-id="rmarkdown">
<span class="header-section-number">3.2</span> Rmarkdown</h3>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/rstudio_intro/rmarkdown_wizards.png" class="img-fluid figure-img" width="1988"></p>
<figcaption>Artwork by @allison_horst</figcaption></figure>
</div>
</div>
</div>
<p>In addition to R scripts, there is another type of document we can create, known as an “Rmarkdown”.</p>
<p>Rmarkdown documents combine the analytical power of R and the utility of a text-processor. We can have one document which contains all of our analysis as well as our written text, and can be <em>compiled</em> into a nicely formatted report. This saves us doing analysis in R and copying results across to Microsoft Word. It ensures our report accurately reflects our analysis. Everything that you’re reading now has all been written in Rmarkdown!</p>
<p>We’re going to use Rmarkdown documents throughout this course. We’ll get into it how to write them lower down, but it basically involves writing normal text interspersed with “code-chunks” (i.e., chunks of code!). In the example below, you can see the grey boxes indicating the R code, with text in between. We can then compile the document into either a <strong>.pdf</strong> or a <strong>.html</strong> file.</p>
<p><img src="images/rstudio_intro/compiling.png" class="img-fluid"></p>
</section></section><section id="recap" class="level2" data-number="4"><h2 data-number="4" class="anchored" data-anchor-id="recap">
<span class="header-section-number">4</span> Recap</h2>
<p>Okay, so we’ve now seen all of the different windows in RStudio in action:</p>
<ul>
<li>The <strong>console</strong> is where R code gets executed</li>
<li>The <strong>environment</strong> is R’s memory, you can <em>assign</em> something a name and store it here, and then refer to it by name in your code.</li>
<li>The <strong>editor</strong> is where you can write and edit R code and Rmarkdown documents. You can then send this to the console for it to be executed.</li>
<li>The bottom-right window shows you the <strong>plots</strong> that you create, the <strong>files</strong> in your project, and some other things (we’ll get to these later).</li>
</ul>
<p><img src="images/rstudio_intro/r4panel3.png" class="img-fluid"></p>
</section><section id="take-a-breather" class="level2" data-number="5"><h2 data-number="5" class="anchored" data-anchor-id="take-a-breather">
<span class="header-section-number">5</span> Take a breather</h2>
<p>Below are a couple of our recommended settings for you to change as you begin your journey in R. After you’ve changed them, take a 5 minute break before moving on to learning about how we store data in R.</p>
<div class="callout callout-style-simple callout-tip">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Useful Settings 1: Clean environments</strong></p>
<p>As you use R more, you will store lots of things with different names. Throughout this course alone, you’ll probably name hundreds of different things. This could quickly get messy within our project.</p>
<p>We can make it so that we have a clean environment each time you open RStudio. This will be really handy.</p>
<ol type="1">
<li>In the top menu, click <strong>Tools &gt; Global Options…</strong>
</li>
<li>Then, <em>untick</em> the box for “Restore .RData into workspace at startup”, and change “Save workspace to .RData on exit” to <em>Never</em>:</li>
</ol>
<p><img src="images/rstudio_intro/renvsettings.png" class="img-fluid"></p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-tip">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Useful Settings 2: Wrapping code</strong></p>
<p>In the editor, you might end up with a line of code which is really long, but you can make RStudio ‘wrap’ the line, so that you can see it all, without having to scroll:</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">+</span><span class="fl">2</span><span class="op">+</span><span class="fl">3</span><span class="op">+</span><span class="fl">6</span><span class="op">+</span><span class="fl">3</span><span class="op">+</span><span class="fl">45</span><span class="op">+</span><span class="fl">8467</span><span class="op">+</span><span class="fl">356</span><span class="op">+</span><span class="fl">8565</span><span class="op">+</span><span class="fl">34</span><span class="op">+</span><span class="fl">34</span><span class="op">+</span><span class="fl">657</span><span class="op">+</span><span class="fl">6756</span><span class="op">+</span><span class="fl">456</span><span class="op">+</span><span class="fl">456</span><span class="op">+</span><span class="fl">54</span><span class="op">+</span><span class="fl">3</span><span class="op">+</span><span class="fl">78</span><span class="op">+</span><span class="fl">3</span><span class="op">+</span><span class="fl">3476</span><span class="op">+</span><span class="fl">8</span><span class="op">+</span><span class="fl">4</span><span class="op">+</span><span class="fl">67</span><span class="op">+</span><span class="fl">456</span><span class="op">+</span><span class="fl">567</span><span class="op">+</span><span class="fl">3</span><span class="op">+</span><span class="fl">34575</span><span class="op">+</span><span class="fl">45</span><span class="op">+</span><span class="fl">2</span><span class="op">+</span><span class="fl">6</span><span class="op">+</span><span class="fl">9</span><span class="op">+</span><span class="fl">5</span><span class="op">+</span><span class="fl">6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>In the top menu, click <strong>Tools &gt; Global Options…</strong>
</li>
<li>In the left menu of the box, click “Code”</li>
<li>
<em>Tick</em> the box for “Soft-wrap R source files”</li>
</ol>
</div>
</div>
</div>
</section><section id="r-packages" class="level2" data-number="6"><h2 data-number="6" class="anchored" data-anchor-id="r-packages">
<span class="header-section-number">6</span> R Packages</h2>
<section id="installing-r-packages" class="level3" data-number="6.1"><h3 data-number="6.1" class="anchored" data-anchor-id="installing-r-packages">
<span class="header-section-number">6.1</span> Installing R packages</h3>
<p>Alongside the basic installation of R and RStudio, there are many add-on packages which the R community create and maintain.</p>
<p>The thousands of packages are part of what makes R such a powerful and useful tool - there is a package for almost everything you could want to do in R.</p>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the <strong>console</strong>, type <code>install.packages("cowsay")</code> and hit Enter.</p>
<p>Lots of red text will come up, and it will take a bit of time.</p>
<p>When it has finished, and R is ready for you to use again, you will see the blue sign &gt;.</p>
</div>
</div>
</section><section id="using-r-packages" class="level3" data-number="6.2"><h3 data-number="6.2" class="anchored" data-anchor-id="using-r-packages">
<span class="header-section-number">6.2</span> Using R packages</h3>
<p>It’s not enough just to install a package - to actually <em>use</em> the package, we need to load it using <code><a href="https://rdrr.io/r/base/library.html">library()</a></code>.<br>
We install a package only once. But each time we open RStudio, we have to load the packages we need.</p>
<p><img src="images/rstudio_intro/libraries.jpeg" class="img-fluid"></p>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the <strong>console</strong> again, type <code><a href="https://github.com/sckott/cowsay">library(cowsay)</a></code> and hit enter. This <em>loads</em> the package for us to use it.<br>
Then, type <code>say("hello world", by = "cow")</code> and hit enter.<br>
Hopefully you got a similar result to ours:</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sckott/cowsay">cowsay</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://sckott.github.io/cowsay/reference/say.html">say</a></span><span class="op">(</span><span class="st">"Hi Folks!"</span>, by <span class="op">=</span> <span class="st">"cow"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 ___________ 
&lt; Hi Folks! &gt;
 ----------- 
      \
       \

        ^__^ 
        (oo)\ ________ 
        (__)\         )\ /\ 
             ||------w|
             ||      ||</code></pre>
</div>
</div>
</div>
</div>
</section></section><section id="your-first-.rmd-file" class="level2" data-number="7"><h2 data-number="7" class="anchored" data-anchor-id="your-first-.rmd-file">
<span class="header-section-number">7</span> Your first .Rmd file</h2>
<p>In order to be able to write and compile Rmarkdown documents (and do a whole load of other things which we are going to need throughout the course) we are now going to install a set of packages known collectively as the “tidyverse” (this includes the “rmarkdown” package).</p>
<ul>
<li>
<strong>If you installed R/Rstudio on your own computer</strong>, then in the <strong>console</strong>, type <code>install.packages("tidyverse")</code> and hit Enter. You may have to wait a while.</li>
<li>
<strong>If you are using rstudio.ppls.ed.ac.uk</strong>, then we have already installed “tidyverse” and a few other useful packages for you, so you don’t have to do anything!</li>
</ul>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>Open a new Rmarkdown document: <strong>File &gt; New File &gt; R Markdown…</strong></p>
<p>When the box pops-up, give a title of your choice (“Intro lab”, maybe?) and your name as the author.</p>
</div>
</div>
<section id="writing-code-in-a-.rmd-file" class="level3" data-number="7.1"><h3 data-number="7.1" class="anchored" data-anchor-id="writing-code-in-a-.rmd-file">
<span class="header-section-number">7.1</span> Writing code in a .Rmd file</h3>
<p>The file which you have just created will have some template stuff in it. Delete everything below the first code chunk to start with a fresh document:</p>
<p><img src="images/rstudio_intro/ss_newrmd.png" class="img-fluid"></p>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>Insert a new code chunk by either using the Insert button in the top right of the document and selecting R, or by typing <em>Ctrl + Alt + i</em> on Windows or <em>Option + Cmd + i</em> on MacOS.</p>
<p>Inside the chunk, type:</p>
<p><code>print("Hello world! My name is ?")</code></p>
<p>To execute the code inside the chunk, you can either:</p>
<ul>
<li>do as you did in the R script - put the text-cursor on the first line, and hit Ctrl/Cmd + Enter to run the lines sequentially;</li>
<li>click the little green arrow at the top right of your code-chunk to run <strong>all</strong> of the code inside the chunk;</li>
<li>while your cursor is inside the code chunk, press Cmd + Shift + Enter to run <strong>all</strong> of the code inside the chunk.</li>
</ul>
<p>You can see that the output gets printed below.</p>
<p><img src="images/rstudio_intro/runchunk.png" class="img-fluid"></p>
</div>
</div>
<p>We’re going to use some functions which are in the <strong>tidyverse</strong> package, which we already installed above (or which we installed for you on the server).<br>
To use the package, we need to load it.</p>
<p>When writing analysis code, we want it to be <strong>reproducible</strong> - we want to be able to give somebody else our code and the data, and ensure that they can get the same results. To do this, we need to show what packages we use.<br>
It is good practice to load any packages you use at the top of your code, so that users of your code will know what packages they will need to install to run your code.</p>
<p>In your first code chunk, type:</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># I'm going to use these packages in this document:</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>and run the chunk.</p>
<p><strong>NOTE:</strong> You might get various messages popping up below when you run this chunk, that is fine.</p>
<p><strong>Comments in code</strong><br>
Note that using <code>#</code> in R code makes that line a comment, which basically means that R will ignore the line. Comments are useful for you to remind yourself of what your code is doing.</p>
</section><section id="writing-text-in-a-.rmd-file" class="level3" data-number="7.2"><h3 data-number="7.2" class="anchored" data-anchor-id="writing-text-in-a-.rmd-file">
<span class="header-section-number">7.2</span> Writing text in a .Rmd file</h3>
<p>Place your cursor outside the code chunk, and <strong>below</strong> the code chunk add a new line with the following:</p>
<p># R code examples</p>
<p>Note that when the # is used in a Rmarkdown file <strong>outside</strong> of a code-chunk, it will make that line a heading when we finally get to <em>compiling</em> the document. Below, what you see on the left will be compiled to look like those on the right:</p>
<p><img src="images/rstudio_intro/headings.png" class="img-fluid"></p>
<section id="recall" class="level4 callout-info" data-number="7.2.1"><h4 data-number="7.2.1" class="anchored" data-anchor-id="recall">
<span class="header-section-number">7.2.1</span> RECALL:</h4>
<ul>
<li>
<strong>Inside</strong> a code-chunk, one or more #s will create a <strong>comment</strong>
</li>
<li>
<strong>Outside</strong> a code-chunk, one ore more #s will create <strong>headings</strong>
</li>
</ul></section><p>In your Rmarkdown document, choose a few of the symbols below, and write an explanation of what it does, giving an example in a code chunk. You can see an example of the first few below.</p>
<ul>
<li><code>+</code></li>
<li><code>-</code></li>
<li><code>*</code></li>
<li><code>/</code></li>
<li><code>()</code></li>
<li><code>^</code></li>
<li><code>&lt;-</code></li>
<li><code>&lt;</code></li>
<li><code>&gt;</code></li>
<li><code>&lt;=</code></li>
<li><code>&gt;=</code></li>
<li><code>==</code></li>
<li><code>!=</code></li>
</ul>
<p><img src="images/rstudio_intro/ss_examples.png" class="img-fluid"></p>
</section><section id="storing-data-into-r" class="level3" data-number="7.3"><h3 data-number="7.3" class="anchored" data-anchor-id="storing-data-into-r">
<span class="header-section-number">7.3</span> Storing data into R</h3>
<p>We’ve already seen how to assign a value to a name/symbol using <code>&lt;-</code>. However, we’ve only seen how to assign a single number, e.g, <code>x &lt;- 5</code>.</p>
<p>To store a sequence of numbers into R, we combine the values using the combine function <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> and give the sequence a name. A sequence of elements all of the same type is called a <strong>vector</strong>. To view the stored content, simply type the name of the vector.</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">myfirstvector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">3</span>, <span class="fl">7</span><span class="op">)</span></span>
<span><span class="va">myfirstvector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 5 3 7</code></pre>
</div>
</div>
<p>We can perform arithmetic operations on each value of the vector. For example, to add five to each entry:</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">myfirstvector</span> <span class="op">+</span> <span class="fl">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  6 10  8 12</code></pre>
</div>
</div>
<p>Recall that vectors are sequences of elements <strong>all of the same type</strong>. They do not have to be always numbers; they could be words such as real or fictional animals. Words need to be written inside quotations, e.g.&nbsp;“anything”, and instead of being of numeric type, we say they are characters.</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wordsvector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"cat"</span>, <span class="st">"dog"</span>, <span class="st">"parrot"</span>, <span class="st">"peppapig"</span><span class="op">)</span></span>
<span><span class="va">wordsvector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "cat"      "dog"      "parrot"   "peppapig"</code></pre>
</div>
</div>
<div class="frame">
<p><strong>NOTE</strong></p>
<p>You can use either double-quote or single-quote:</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"cat"</span>, <span class="st">"dog"</span>, <span class="st">"parrot"</span>, <span class="st">"peppapig"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "cat"      "dog"      "parrot"   "peppapig"</code></pre>
</div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'cat'</span>, <span class="st">'dog'</span>, <span class="st">'parrot'</span>, <span class="st">'peppapig'</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "cat"      "dog"      "parrot"   "peppapig"</code></pre>
</div>
</div>
</div>
<p>The function <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> will tell you the type of the object. In this case, it is a character vector.</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">wordsvector</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>It does not make sense to add a number to words, hence some operations like addition and multiplication are only defined on vectors of numeric type. If you make a mistake, R will warn you with a red error message.</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wordsvector</span> <span class="op">+</span> <span class="fl">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p style="color:red">
Error in wordsvector + 5 : non-numeric argument to binary operator
</p>
<p>Finally, it is important to notice that if you combine together in a vector a number and a word, R will transform all elements to be of the same type. Why? Recall: vectors are sequences of elements <strong>all of the same type</strong>. Typically, R chooses the most general type between the two. In this particular case, it would make everything a character, check the ““, as it would be harder to transform a word into a number!</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mysecondvector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="st">"cat"</span><span class="op">)</span></span>
<span><span class="va">mysecondvector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "4"   "cat"</code></pre>
</div>
</div>
</section><section id="reading-data-into-r" class="level3" data-number="7.4"><h3 data-number="7.4" class="anchored" data-anchor-id="reading-data-into-r">
<span class="header-section-number">7.4</span> Reading data into R</h3>
<p>While we can manually input data like we did above, more often, we will need to read in data which has been created elsewhere (like in excel, or by some software which is used to present participants with experiments).</p>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>Add a new heading by typing the following:</p>
<p># Reading and storing data</p>
<p><strong>Remember:</strong> We make headings using the # <em>outside</em> of a code chunk.</p>
</div>
</div>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>Open Microsoft Excel, or LibreOffice Calc, or whatever spreadsheet software you have available to you, and create some data with more than one variable.</p>
<p>It can be whatever you want, but we’ve used a very small example here for you to follow, so feel free to use it if you like.</p>
<p>We’ve got two sets of values here: the names and the birth-years of each member of the Beatles. The easiest way to think of this would be to have a row for each Beatle, and a column for each of name and birth-year.</p>
<p><img src="images/rstudio_intro/create_data.png" class="img-fluid"></p>
</div>
</div>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>Save the data as a <strong>.csv</strong> file.</p>
<p>Although R can read data when it’s saved in Microsoft/LibreOffice formats, the simplest, and most universal way to save data is as simple text, with the values separated by some character - <strong>.csv</strong> stands for <strong>comma separated values</strong>.</p>
<p>In Microsoft Excel, if you go to <strong>File &gt; Save as</strong></p>
<p>In the Save as Type box, choose to save the file as <strong>CSV (Comma delimited)</strong>.</p>
<p><strong>Important:</strong> save your data in the project folder you created at the start of this lab.</p>
</div>
</div>
<p>Back in RStudio…</p>
<p>Next, we’re going to read the data into R. We can do this by using the <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> function, and directing it to the file you just saved.</p>
<p><strong>If you are using RStudio on the server</strong>, you will need to upload the file you just saved to the server. The video below shows an example of this:</p>
<!-- <center> -->
<!-- <video width="320" height="240" controls> -->
<!--   <source src="images/rstudio_intro/uploaddataserver.mp4" type="video/mp4"> -->
<!-- </video> -->
<!-- </center> -->
<div class="quarto-video"><video id="video_shortcode_videojs_video1" width="320" height="240" class="video-js vjs-default-skin " controls="" preload="auto" data-setup="{}" title=""><source src="https://uoepsy.github.io/files/rstudio_intro/uploaddataserver.mp4"></video></div>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create a new code-chunk in your Rmarkdown and, in the chunk, type: <code>read_csv("name-of-your-data.csv")</code>, where you replace <em>name-of-your-data</em> with whatever you just saved your data as in your spreadsheet software.</p>
</div>
</div>
<p><strong>Helpful tip</strong><br>
If you have your text-cursor inside the quotation marks, and press the tab key on your keyboard, it will show you the files inside your project. You can then use the arrow keys to choose between them and press Enter to add the code:</p>
<!-- <center> -->
<!-- <video width="320" height="240" controls> -->
<!--   <source src="images/rstudio_intro/readdatatab.mp4" type="video/mp4"> -->
<!-- </video> -->
<!-- </center> -->
<div class="quarto-video"><video id="video_shortcode_videojs_video2" width="320" height="240" class="video-js vjs-default-skin " controls="" preload="auto" data-setup="{}" title=""><source src="https://uoepsy.github.io/files/rstudio_intro/readdatatab.mp4"></video></div>
<p>When you run the line of code you just wrote, it will print out the data, but will not store it. To do that, we need to assign it as something:</p>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">beatles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data_from_excel.csv"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that this will now turn up in the <em>Environment</em> pane of RStudio.</p>
<p>Now that we’ve got our data in R, we can print it out by simply invoking its name:</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">beatles</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  name   birth_year
  &lt;chr&gt;       &lt;dbl&gt;
1 John         1940
2 Paul         1942
3 George       1943
4 Ringo        1940</code></pre>
</div>
</div>
<p>And we can do things such as ask R how many rows and columns there are:</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">beatles</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 2</code></pre>
</div>
</div>
<p>This says that there are 4 members of the Beatles, and for each we have 2 measurements.</p>
<p>To get more insight into what the data actually are, you can either use the structure <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> function, or <code><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse()</a></code> function to get a glimpse at the data:</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">beatles</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [4 × 2] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ name      : chr [1:4] "John" "Paul" "George" "Ringo"
 $ birth_year: num [1:4] 1940 1942 1943 1940
 - attr(*, "spec")=
  .. cols(
  ..   name = col_character(),
  ..   birth_year = col_double()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">beatles</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 4
Columns: 2
$ name       &lt;chr&gt; "John", "Paul", "George", "Ringo"
$ birth_year &lt;dbl&gt; 1940, 1942, 1943, 1940</code></pre>
</div>
</div>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use <code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code> to confirm how many rows and columns are in your data.</p>
<p>Use <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> or <code><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse()</a></code> to take a look at the structure of the data. Don’t worry about the output of <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> right now, we’ll pick up with this in the next chapter.</p>
</div>
</div>
</section><section id="getting-help-in-r" class="level3" data-number="7.5"><h3 data-number="7.5" class="anchored" data-anchor-id="getting-help-in-r">
<span class="header-section-number">7.5</span> Getting help in R</h3>
<p><code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code>, <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code>, <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> are all <strong>functions</strong>.</p>
<p><strong>Functions</strong> perform specific operations / transformations in computer programming.</p>
<p>They can have <strong>inputs</strong> and <strong>outputs</strong>. For example, <code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code> takes some data you have stored in R as its <strong>input</strong>, and gives the dimensions of the data as its <strong>output</strong>.</p>
<p>In R, functions come with help pages, where you can see information about the various inputs and outputs, and examples of how to use them.</p>
<p>In the <strong>console</strong>, type <code><a href="https://rdrr.io/r/base/dim.html">?dim</a></code> (or <code>?dim()</code> will work too) and press Enter.<br>
The bottom-right pane (where things like plots are also shown), should switch to the <em>Help</em> tab, and open the documentation page for the <code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code> function!</p>
<div class="callout callout-style-simple callout-tip">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>Why did we ask you to write this bit in the console, whereas previously we’ve been writing stuff in the RMarkdown document in the editor?</p>
<p>Well, when writing an RMarkdown document, the aim at the end is to have a nice document which we can read. For instance, we can write statistical reports, journal papers, coursework reports etc, in Rmarkdown. But the reader doesn’t need to see that we’re looking up how to use some function - just like they don’t need to know that we might look up a word in the dictionary before using it.</p>
</div>
</div>
</div>
</section><section id="compiling-a-.rmd-file" class="level3" data-number="7.6"><h3 data-number="7.6" class="anchored" data-anchor-id="compiling-a-.rmd-file">
<span class="header-section-number">7.6</span> Compiling a .Rmd file</h3>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Task
</div>
</div>
<div class="callout-body-container callout-body">
<p>By now, you should have an Rmardkown document (.Rmd) with your answers to the tasks we’ve been through today.</p>
<p>Compile the document by clicking on the <strong>Knit</strong> button at the top (it will ask you to save your document first). The little arrow to the right of the Knit button allows you to compile to either <strong>.pdf</strong> or <strong>.html</strong>.</p>
</div>
</div>
</section></section><section id="checklist-for-today" class="level2" data-number="8"><h2 data-number="8" class="anchored" data-anchor-id="checklist-for-today">
<span class="header-section-number">8</span> Checklist for today</h2>
<ol type="1">
<li>
<strong>EITHER:</strong>
<ul>
<li>Option A: Get started with the PPLS RStudio Server   ✔</li>
<li>Option B: Install R and RStudio   ✔</li>
</ul>
</li>
<li>Start a new project for the course   ✔</li>
<li>Change a few RStudio settings (recommended)   ✔</li>
<li>Install some R packages (the “tidyverse”)   ✔</li>
<li>Create a new Rmarkdown document   ✔</li>
<li>Complete today’s tasks and exercises on storing data in R   ✔</li>
<li>Compile your Rmarkdown document   ✔</li>
<li>Celebrate!   ✔ 🎉</li>
</ol></section><section id="glossary" class="level2" data-number="9"><h2 data-number="9" class="anchored" data-anchor-id="glossary">
<span class="header-section-number">9</span> Glossary</h2>
<ul>
<li>Console: where the code gets executed</li>
<li>Environment: R’s memory, it lists all the names of things with stuff stored into them</li>
<li>Editor: where we edit code</li>
<li>R script: a file with R code and comments</li>
<li>Rmarkdown document: an enhanced file where you can combine together R code, explanatory text, and plots.</li>
<li>packages (also library): user-created bundles providing additional functionality to your local R installation</li>
<li>functions: they take inputs, do some transformation or computation on them, and return a result (output)</li>
<li>?: returns the help page of a function, e.g.&nbsp;?dim.</li>
</ul>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Symbol</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Example</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>+</code></td>
<td style="text-align: left;">Adds two numbers together</td>
<td style="text-align: left;">
<code>2+2</code> - two plus two</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>-</code></td>
<td style="text-align: left;">Subtract one number from another</td>
<td style="text-align: left;">
<code>3-1</code> - three minus one</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>*</code></td>
<td style="text-align: left;">Multiply two numbers together</td>
<td style="text-align: left;">
<code>3*3</code> - three times three</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>/</code></td>
<td style="text-align: left;">Divide one number by another</td>
<td style="text-align: left;">
<code>9/3</code> - nine divided by three</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>()</code></td>
<td style="text-align: left;">group operations together</td>
<td style="text-align: left;">
<code>(2+2)/4</code> is different from <code>2+2/4</code>
</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>^</code></td>
<td style="text-align: left;">to the power of..</td>
<td style="text-align: left;">
<code>4^2</code> - four to the power of two, or four squared</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>&lt;-</code></td>
<td style="text-align: left;">stores an object in R with the left hand side (LHS) as the name, and the RHS as the value</td>
<td style="text-align: left;"><code>x &lt;- 10</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>=</code></td>
<td style="text-align: left;">stores an object in R with the left hand side (LHS) as the name, and the RHS as the value</td>
<td style="text-align: left;"><code>x = 10</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>&lt;</code></td>
<td style="text-align: left;">is less than?</td>
<td style="text-align: left;"><code>2 &lt; 3</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>&gt;</code></td>
<td style="text-align: left;">is greater than?</td>
<td style="text-align: left;"><code>2 &gt; 3</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>&lt;=</code></td>
<td style="text-align: left;">is less than or equal to?</td>
<td style="text-align: left;"><code>2 &lt;= 3</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>&gt;=</code></td>
<td style="text-align: left;">is greater than or equal to?</td>
<td style="text-align: left;"><code>2 &gt;= 2</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>==</code></td>
<td style="text-align: left;">is equal to?</td>
<td style="text-align: left;"><code>(5+5) == 10</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>!=</code></td>
<td style="text-align: left;">is not equal to?</td>
<td style="text-align: left;"><code>(2+3) != 4</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code><a href="https://rdrr.io/r/base/c.html">c()</a></code></td>
<td style="text-align: left;">combines values into a vector (a sequence of values)</td>
<td style="text-align: left;"><code>c(1,2,3,4)</code></td>
</tr>
</tbody>
</table>


</section>
</div>
</section></section><a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>videojs(video_shortcode_videojs_video1);</script><script>videojs(video_shortcode_videojs_video2);</script>


</body></html>