<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Probability 1 – DAPR1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-1fa1d8026083a9bddc52b4aafc7f818e.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-8e00f2f28a1266a720913de837032221.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-4823d056cc0a8309e077c97e601d5ea4.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-936f437bde601076d6706b684ef02b78.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script>
function toggle_visibility(id1, id2) {
var e = document.getElementById(id1);
var f = document.getElementById(id2);
e.style.display = ((e.style.display!='none') ? 'none' : 'block');
if(f.classList.contains('fa-chevron-circle-right')) {
    f.classList.add('fa-chevron-circle-down')
    f.classList.remove('fa-chevron-circle-right')
} else {
    f.classList.add('fa-chevron-circle-right')
    f.classList.remove('fa-chevron-circle-down')
}
}
</script><script src="https://kit.fontawesome.com/120b08a6f5.js" crossorigin="anonymous"></script><link rel="stylesheet" href="https://uoepsy.github.io/assets/css/ccfooter.css">
<script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script><link rel="stylesheet" href="assets/styles.css">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">DAPR1</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-lab-materials" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Lab Materials</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-lab-materials">
<li class="dropdown-header"><b>Block 1: Exploratory data analysis</b></li>
        <li>
    <a class="dropdown-item" href="./1_01_design_and_data.html">
 <span class="dropdown-text">S1-W1: Research design &amp; data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_02_categorical_data.html">
 <span class="dropdown-text">S1-W2: Categorical data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_03_numeric_data.html">
 <span class="dropdown-text">S1-W3: Numeric data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_04_relationships.html">
 <span class="dropdown-text">S1-W4: Relationships</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_05_formative_report_a.html">
 <span class="dropdown-text">S1-W5: Formative Report A</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header"><b>Block 2: Probability</b></li>
        <li>
    <a class="dropdown-item" href="./1_07_prob_theory.html">
 <span class="dropdown-text">S1-W7: Probability Theory</span></a>
  </li>  
    </ul>
</li>
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-readings" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Readings</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-readings">
<li>
    <a class="dropdown-item" href="./zf_formatting_resources.html">
 <span class="dropdown-text">Formatting Resources</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header"><b>Block 1: Exploratory data analysis</b></li>
        <li>
    <a class="dropdown-item" href="./rd1_01.html">
 <span class="dropdown-text">S1-W1: Getting started with R and RStudio</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./rd1_02.html">
 <span class="dropdown-text">S1-W2: Categorical data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./rd1_03.html">
 <span class="dropdown-text">S1-W3: Numeric data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./rd1_04.html">
 <span class="dropdown-text">S1-W4: Relationships</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./rd1_05.html">
 <span class="dropdown-text">S1-W5: Functions</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header"><b>Block 2: Probability</b></li>
        <li>
    <a class="dropdown-item" href="./rd1_07.html">
 <span class="dropdown-text">S1-W7: Probability 1</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#video-activity" id="toc-video-activity" class="nav-link" data-scroll-target="#video-activity"><span class="header-section-number">2</span> Video activity</a></li>
  <li>
<a href="#random-experiments-and-probability" id="toc-random-experiments-and-probability" class="nav-link" data-scroll-target="#random-experiments-and-probability"><span class="header-section-number">3</span> Random experiments and probability</a>
  <ul class="collapse">
<li><a href="#example-1-flipping-a-coin" id="toc-example-1-flipping-a-coin" class="nav-link" data-scroll-target="#example-1-flipping-a-coin"><span class="header-section-number">3.1</span> Example 1: Flipping a coin</a></li>
  <li><a href="#example-2-throwing-a-die" id="toc-example-2-throwing-a-die" class="nav-link" data-scroll-target="#example-2-throwing-a-die"><span class="header-section-number">3.2</span> Example 2: Throwing a die</a></li>
  <li><a href="#events" id="toc-events" class="nav-link" data-scroll-target="#events"><span class="header-section-number">3.3</span> Events</a></li>
  <li><a href="#example-3-flipping-2-coins" id="toc-example-3-flipping-2-coins" class="nav-link" data-scroll-target="#example-3-flipping-2-coins"><span class="header-section-number">3.4</span> Example 3: Flipping 2 coins</a></li>
  </ul>
</li>
  <li><a href="#defining-probability" id="toc-defining-probability" class="nav-link" data-scroll-target="#defining-probability"><span class="header-section-number">4</span> Defining probability</a></li>
  <li><a href="#the-law-of-large-numbers" id="toc-the-law-of-large-numbers" class="nav-link" data-scroll-target="#the-law-of-large-numbers"><span class="header-section-number">5</span> The law of large numbers</a></li>
  <li><a href="#law-of-averages-unicorn" id="toc-law-of-averages-unicorn" class="nav-link" data-scroll-target="#law-of-averages-unicorn"><span class="header-section-number">6</span> Law of averages = unicorn</a></li>
  <li>
<a href="#modelling-probability" id="toc-modelling-probability" class="nav-link" data-scroll-target="#modelling-probability"><span class="header-section-number">7</span> Modelling probability</a>
  <ul class="collapse">
<li><a href="#probability-in-the-case-of-equally-likely-outcomes" id="toc-probability-in-the-case-of-equally-likely-outcomes" class="nav-link" data-scroll-target="#probability-in-the-case-of-equally-likely-outcomes"><span class="header-section-number">7.1</span> Probability in the case of equally likely outcomes</a></li>
  </ul>
</li>
  <li><a href="#glossary" id="toc-glossary" class="nav-link" data-scroll-target="#glossary"><span class="header-section-number">8</span> Glossary</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Probability 1</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="introduction" class="level2" data-number="1"><h2 data-number="1" class="anchored" data-anchor-id="introduction">
<span class="header-section-number">1</span> Introduction</h2>
<p>Think about flipping a coin once. Can you predict the outcome?</p>
<p>Think about flipping a coin many times, one million say. Are you able to predict roughly how many heads or tails will show up?</p>
<p>It’s hard to guess the outcome of just one coin flip because the outcome could be one of two possible outcomes. Hence, we say that flipping a coin is a <em>random experiment</em> or <em>random process.</em></p>
<p>If you flip it over and over, however, you can predict the proportion of heads you’re likely to see <em>in the long run.</em> In the long run simply means if you were to repeat the same experiment over and over many times under the same conditions.</p>
<p>This discussion leads us to define the specific type of randomness that we will be studying in this course.</p>
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>What is randomness?</strong></p>
<p>We will say that a repeatable process is random if its outcome is</p>
<ul>
<li>unpredictable in the short run, and</li>
<li>predictable in the long run.</li>
</ul>
</div>
</div>
</div>
<p>It is this long-term predictability of randomness that we will use throughout the rest of the course. To do that, we will need to talk about the probabilities of different outcomes and learn some rules for dealing with them.</p>
</section><section id="video-activity" class="level2" data-number="2"><h2 data-number="2" class="anchored" data-anchor-id="video-activity">
<span class="header-section-number">2</span> Video activity</h2>
<p>Please watch the following video, explaining you to the concept of “randomness”.</p>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/H2lJLXS3AYM" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<!-- <center> -->
<!-- <iframe width="560" height="315" src="https://www.youtube.com/embed/H2lJLXS3AYM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen> -->
<!-- </iframe> -->
<!-- </center> -->
</section><section id="random-experiments-and-probability" class="level2" data-number="3"><h2 data-number="3" class="anchored" data-anchor-id="random-experiments-and-probability">
<span class="header-section-number">3</span> Random experiments and probability</h2>
<section id="example-1-flipping-a-coin" class="level3" data-number="3.1"><h3 data-number="3.1" class="anchored" data-anchor-id="example-1-flipping-a-coin">
<span class="header-section-number">3.1</span> Example 1: Flipping a coin</h3>
<p>The process of flipping a coin is an example of a random experiment as its outcome is uncertain. We do not know beforehand whether the coin will land heads (H) or tails (T).</p>
<p>The collection of all possible outcomes is known as the <em>outcome space</em> or <em>sample space.</em> We typically denote the sample space by <span class="math inline">\(S\)</span>. In the coin example, this is: <span class="math display">\[
S = \{ H, T \}
\]</span></p>
<p>One particular repetition (i.e.&nbsp;instance) of such experiment is known as a <em>trial</em>.</p>
</section><section id="example-2-throwing-a-die" class="level3" data-number="3.2"><h3 data-number="3.2" class="anchored" data-anchor-id="example-2-throwing-a-die">
<span class="header-section-number">3.2</span> Example 2: Throwing a die</h3>
<p>Another example of a random experiment is throwing a six-faced die as, for each trial, we can not exactly predict which face will appear.</p>
<p>The list of possible outcomes for the die experiment is <span class="math inline">\(1, 2, ..., 6\)</span>. Hence, the sample space can be written: <span class="math display">\[
S = \{1, 2, 3, 4, 5, 6 \}
\]</span></p>
</section><section id="events" class="level3" data-number="3.3"><h3 data-number="3.3" class="anchored" data-anchor-id="events">
<span class="header-section-number">3.3</span> Events</h3>
<p>Consider again the die experiment. Often, we are not interested in the probability of observing a particular outcome, such as 3, but rather in a collection of outcomes together. For example, we might be interested in the probability of observing an even number.</p>
<p>Such collections of outcomes are called <strong>events.</strong> More formally, an event is a set of outcomes.</p>
<p>Each individual outcome is also considered an event. To distinguish, some people call <em>simple events</em> the individual outcomes, and <em>compound events</em> a collection of two or more outcomes.</p>
<p>The event “an even number appears” is simply the collection of even outcomes. We could call it “E” for “even” and write it as: <span class="math display">\[E = \{ 2, 4, 6\}\]</span></p>
<p>Two important events are:</p>
<ul>
<li>the <strong>empty set</strong>: the set of no outcomes, denoted <span class="math inline">\(\emptyset\)</span>;</li>
<li>the <strong>sample space</strong>: the set of all outcomes, denoted <span class="math inline">\(S\)</span>.</li>
</ul>
<p>In general, a finite sample space is written <span class="math display">\[
S = \{s_1, s_2, ..., s_n\}
\]</span></p>
<p>where each <span class="math inline">\(s_i\)</span> represents an outcome or simple event.</p>
</section><section id="example-3-flipping-2-coins" class="level3" data-number="3.4"><h3 data-number="3.4" class="anchored" data-anchor-id="example-3-flipping-2-coins">
<span class="header-section-number">3.4</span> Example 3: Flipping 2 coins</h3>
<p>Consider flipping 2 coins simultaneously. The sample space is: <span class="math display">\[
S = \{ (H,H), (H,T), (T,H), (T,T)\}
\]</span></p>
<p>Typical events could be:</p>
<ul>
<li>Observing tails at least once, <span class="math inline">\(A = \{(H,T), (T,H), (T,T)\}\)</span>
</li>
<li>Observing the same face twice, <span class="math inline">\(B = \{(H,H), (T,T)\}\)</span>
</li>
</ul></section></section><section id="defining-probability" class="level2" data-number="4"><h2 data-number="4" class="anchored" data-anchor-id="defining-probability">
<span class="header-section-number">4</span> Defining probability</h2>
<p>Consider repeating the random process of throwing a die many times, 500 say, and recording whether or not an even number appears. We will now create a table listing the result of each trial.</p>
<p>First, we load the <code>tidyverse</code> package:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we create the sample space:</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">S</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span></span>
<span><span class="va">S</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5 6</code></pre>
</div>
</div>
<p>The following code defines the event “an even number appears”:</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">E</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">E</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 6</code></pre>
</div>
</div>
<p>Say, now, that the outcome of a roll is 3. How can we check whether the outcome belongs to the event of interest <span class="math inline">\(E\)</span>?</p>
<p>We can use the <code>%in%</code> function to ask R: “Is 3 in E?” The answer can be TRUE or FALSE.</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fl">3</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">E</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>Suppose instead, that the outcome of a roll is 2. Is 2 in E?</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fl">2</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">E</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>We now specify how many trials we will be performing:</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">num_trials</span> <span class="op">&lt;-</span> <span class="fl">500</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, we repeat the experiment <code>num_trials</code> times and compute the accumulated percentage of even outcomes:</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">experiment</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span></span>
<span>    trial <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">num_trials</span>,</span>
<span>    outcome <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">S</span>, <span class="va">num_trials</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    is_even <span class="op">=</span> <span class="va">outcome</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">E</span>,</span>
<span>    cumul_even <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">is_even</span><span class="op">)</span>,</span>
<span>    cumul_perc_even <span class="op">=</span> <span class="fl">100</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">is_even</span><span class="op">)</span> <span class="op">/</span> <span class="va">trial</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The following code displays the top 10 rows of the experiment:</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">experiment</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 5
   trial outcome is_even cumul_even cumul_perc_even
   &lt;int&gt;   &lt;int&gt; &lt;lgl&gt;        &lt;int&gt;           &lt;dbl&gt;
 1     1       5 FALSE            0             0  
 2     2       2 TRUE             1            50  
 3     3       4 TRUE             2            66.7
 4     4       4 TRUE             3            75  
 5     5       2 TRUE             4            80  
 6     6       3 FALSE            4            66.7
 7     7       4 TRUE             5            71.4
 8     8       2 TRUE             6            75  
 9     9       5 FALSE            6            66.7
10    10       2 TRUE             7            70  </code></pre>
</div>
</div>
<hr>
<p><strong>Understanding the code</strong>. Let’s inspect each column in turn:</p>
<ul>
<li>
<code>trial</code> records the number of each trial: 1, 2, …, 500;</li>
<li>
<code>outcome</code> lists the result of each trial: 1, or 2, …, or 6;</li>
<li>
<code>is_even</code> checks whether the outcome of each trial belongs to the event <span class="math inline">\(E\)</span> (=TRUE) or not (=FALSE);</li>
<li>
<code>cumul_even</code> computes the cumulative sum of <code>is_even</code>.</li>
</ul>
<p>As we saw, the <code>is_even</code> column contains either TRUE or FALSE. This was created with the function <code>%in%</code>, which is equivalent to asking a question: Is the outcome in <span class="math inline">\(E\)</span>? The result will be either TRUE or FALSE. We note that, when summed, R considers a TRUE as 1, and a FALSE as 0. For example, the cumulative sum of <code>c(TRUE, FALSE, TRUE, TRUE, FALSE)</code> is <code>c(1, 1, 2, 3, 3)</code>. Finally, the column <code>cumul_perc_even</code> computes the accumulate percentage of even outcomes.</p>
<hr>
<p>The first trial’s outcome was 5, which is not an even number. Hence the cumulative percentage of even outcomes is 0 out of 100, or 0%. The next four trials lead to 2, 4, 4, and 2 respectively, which all are even numbers. The cumulative percentages will be 1 out of 2 (50%), 2 out of 3 (66.67%), 3 out of 4 (75%), and 4 out of 5 (80%). Next, we observe 3, which is odd, hence the cumulative percentage of even outcomes is now 4 out of 66.67%, and so on.</p>
<p>Finally, we plot the accumulated percentage of even numbers against the trial number:</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">experiment</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">trial</span>, </span>
<span>                       y <span class="op">=</span> <span class="va">cumul_perc_even</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">'darkolivegreen4'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">'darkolivegreen4'</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">'red'</span>, linetype <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Trial number"</span>, y <span class="op">=</span> <span class="st">"Accumulated percent even"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="rd1_07_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As the number of trials increase, we see that the curve approaches 50%, which is 0.5, and that the cumulative percentage of even outcomes keeps fluctuating around 50%.</p>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Checkpoint
</div>
</div>
<div class="callout-body-container callout-body">
<p>What’s the probability of obtaining an even number when throwing a fair die?</p>
</div>
</div>
<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>If you answered 0.5 (or 50%), then you are on the right track!</p>
</div>
</div>
</div>
<p>Based on the graph, it looks like the relative frequency of an even number settles down to about 50%, so saying that the probability is about 0.5 seems like a reasonable answer.</p>
<p>But do random experiments always behave well enough for this definition of probability to always apply? Perhaps the relative frequency of an event can bounce back and forth between two values forever, never settling on just one number?</p>
</section><section id="the-law-of-large-numbers" class="level2" data-number="5"><h2 data-number="5" class="anchored" data-anchor-id="the-law-of-large-numbers">
<span class="header-section-number">5</span> The law of large numbers</h2>
<p>Fortunately, Jacob Bernoulli proved the <em>Law of large numbers (LLN)</em> in the 18th century, giving us the peace of mind that we need.</p>
<div class="callout callout-style-simple callout-caution">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Law of large numbers</strong></p>
<p>The law of large numbers (LLN) states that as we repeat a random experiment over and over, the proportion of times that an event occurs does settle down to a single number. We call this number the <strong>probability</strong> of that event.</p>
</div>
</div>
</div>
<p>However, it is not that simple. The LLN requires two key assumptions:</p>
<ol type="1">
<li>
<em>Identical distribution</em>: The outcomes of the random experiment must have the same probabilities of occurring in each trial. That is, we can not have in trial 1 a 50% chance of observing an even number, and then a 80% chance in trial 2. The underlying chance needs to be the same. This is accomplished by not changing the random experiment we are studying, the repeated trials must happen in the <em>same conditions.</em>
</li>
<li>
<em>Independence</em>: The outcome of one trial must not affect the outcomes of other trials.</li>
</ol>
<p>For the die experiment, we can now write that the probability of observing an even number is 0.5 as follows. First, we need to define the event of interest, <span class="math inline">\(E = \{2, 4, 6\}\)</span>, and then we can write: <span class="math display">\[
P(E) = 0.5
\]</span></p>
<p>If you do not give a name to the event, you must specify it inside of the parentheses. Note the use of round parentheses for probability <span class="math inline">\(P()\)</span> and the curly brackets to list the outcomes of interest. <span class="math display">\[
P(\{2, 4, 6\}) = 0.5
\]</span></p>
<p>We reached this definition of the probability of the event <span class="math inline">\(E\)</span>. In the long run, <span class="math display">\[
P(E) = \frac{\text{number of times outcome was in the event } E}{\text{total number of trials}}
\]</span></p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Notation
</div>
</div>
<div class="callout-body-container callout-body">
<p>We typically use the first few capital letters of the alphabet to name events. The letter <span class="math inline">\(P\)</span> will always be reserved for probability.</p>
<p>When we write <span class="math inline">\(P(A) = 0.5\)</span> we mean “the probability of the event <span class="math inline">\(A\)</span> is 0.5”.</p>
<p>We use proportions (or decimal numbers) when reporting probability values in a formal situation like writing a report or a paper. However, when discussing probability informally, we often use percentages.</p>
</div>
</div>
</section><section id="law-of-averages-unicorn" class="level2" data-number="6"><h2 data-number="6" class="anchored" data-anchor-id="law-of-averages-unicorn">
<span class="header-section-number">6</span> Law of averages = unicorn</h2>
<p>You might have heard from friends or TV shows that sometimes the random experiment “owes” you a particular outcome. Let’s try to entangle this in more detail and understand where the pitfall of this reasoning is.</p>
<p>The law of large numbers tells us that the probability of an event is the proportion of times we would observe it <strong>in the long run.</strong> The long run is really long - infinitely long. We, as humans and finite entities, can not generate an infinitely long sequence of trials and memorise it.</p>
<p>Many people believe that if you flip a fair coin, where fair means that the chance of getting heads is the same as the chance of getting tails (0.5) we expect the coin to “even out” the results in the coming trials if heads has not appeared in the recent ones.</p>
<p>Say, for example, that in 10 trials you only observed 1 head. This is quite a low proportion, 0.1 (1 out of 10) compared to the 0.5 (5 out of 10) that the player expected. Does this mean that the coin due to show heads in the near future, as the coin “owes” us some heads to even out the proportions?</p>
<p>The answer is <strong>no.</strong></p>
<p>The long run means that the proportions will eventually even out in the infinite sequence of trials, but you will not know when this happens and there is absolutely no requirement for the coin to show heads again in the upcoming trials in order to keep a probability of 0.5.</p>
</section><section id="modelling-probability" class="level2" data-number="7"><h2 data-number="7" class="anchored" data-anchor-id="modelling-probability">
<span class="header-section-number">7</span> Modelling probability</h2>
<p>To assign a probability value to different events, we should make sure that these coherence principles are satisfied:</p>
<p><strong>Rule 1: Probability assignment rule</strong></p>
<p>The probability of an impossible event (an event which never occurs) is 0 and the probability of a certain event (an event which always occurs) is 1.</p>
<p>Hence, we have that <em>the probability is a number between 0 and 1</em>: <span class="math display">\[\text{for any event }A, \\ 0 \leq P(A) \leq 1\]</span></p>
<p><strong>Rule 2: Total probability rule</strong></p>
<p>If an experiment has a single possible outcome, it is not random as that outcome will happen with certainty (i.e.&nbsp;probability 1).</p>
<p>When dealing with two or more possible outcomes, we need to be sure to distribute the entire probability among all of the possible outcomes in the sample space <span class="math inline">\(S\)</span>.</p>
<p>The sample space must have probability 1: <span class="math display">\[P(S) = 1\]</span></p>
<p>It must be that the will observe one of the outcomes listed within the collection of all possible outcomes of the experiment.</p>
<p><strong>Rule 3: Complement rule</strong></p>
<p>If the probability of observing the face “2” in a die is 1/6 = 0.17, what’s the probability of not observing the face “2”? It must be 1 - 1/6 = 5/6 = 0.83.</p>
<p>If <span class="math inline">\(A = \{2\}\)</span>, the event “not A” is the complement of A and is written <span class="math inline">\(A^c\)</span>, which is a shortcut for <span class="math inline">\(S\)</span> without <span class="math inline">\(A\)</span>, that is <span class="math inline">\(\{1, 3, 4, 5, 6\}\)</span>.</p>
<p><span class="math display">\[P(A^c) = 1 - P(A)\]</span></p>
<p><strong>Rule 4: Addition rule for disjoint events</strong></p>
<p>Suppose the probability that a randomly picked person in a town is <span class="math inline">\(A\)</span> = “a high school student” is <span class="math inline">\(P(A) = 0.3\)</span> and that the probability of being <span class="math inline">\(B\)</span> = “a university student” is <span class="math inline">\(P(B) = 0.5\)</span>.</p>
<p>What is the probability that a randomly picked person from the town is <em>either</em> a high school student <em>or</em> a university student? We write the event “either A or B” as <span class="math inline">\(A \cup B\)</span>, pronounced “A union B”.</p>
<p>If you said 0.8, because it is 0.3 + 0.5, then you just applied the <em>addition rule</em>: <span class="math display">\[
\text{If }A \text{ and } B \text{ are mutually exclusive events,}\\
P(A \cup B) = P(A) + P(B)
\]</span></p>
<p><strong>Rule 5: Multiplication rule for independent events</strong></p>
<p>We saw that probability of observing an even number (<span class="math inline">\(E\)</span>) when throwing a die is 0.5.</p>
<p>You also know that the probability of observing heads (<span class="math inline">\(H\)</span>) when throwing a fair coin is 0.5.</p>
<p>What’s the probability of observing an even number and heads (that is, <span class="math inline">\(E\)</span> <em>and</em> <span class="math inline">\(H\)</span>, written <span class="math inline">\(E \cap H\)</span>) when throwing both items together?</p>
<p>The rule simply says that in this case we multiply the two probabilities together: 0.5 * 0.5 = 0.25.</p>
<p>The <em>multiplication rule for independent events</em> says: <span class="math display">\[
\text{If }A \text{ and } B \text{ are independent events,}\\
P(A \cap B) = P(A) \times P(B)
\]</span></p>
<section id="probability-in-the-case-of-equally-likely-outcomes" class="level3" data-number="7.1"><h3 data-number="7.1" class="anchored" data-anchor-id="probability-in-the-case-of-equally-likely-outcomes">
<span class="header-section-number">7.1</span> Probability in the case of equally likely outcomes</h3>
<p>Consider a sample space of <span class="math inline">\(n\)</span> outcomes</p>
<p><span class="math display">\[
S = \{s_1, s_2, \dots, s_n \}
\]</span></p>
<p>and suppose these are all equally likely, with <span class="math inline">\(p\)</span> denoting the probability of each outcome: <span class="math display">\[
P(\{s_1\}) = P(\{s_2\}) = \cdots = P(\{s_n\}) = p
\]</span></p>
<p>As the outcomes in the sample space are mutually exclusive events,<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> we can compute the probability of the sample space as</p>
<p><span class="math display">\[
1 = P(S) = P(\{s_1\}) + P(\{s_2\}) + \cdots + P(\{s_n\}) = p + p + \cdots + p = n p
\]</span></p>
<p>which leads to <span class="math display">\[
p = P(\{s_i\}) = \frac{1}{n}
\]</span></p>
<p>Next, consider an event <span class="math inline">\(A\)</span> comprising a few of the outcomes from <span class="math inline">\(S\)</span></p>
<p><span class="math display">\[
A = \{s_2, s_5, s_9\}
\]</span> which can be also written as the union of disjoint events</p>
<p><span class="math display">\[
A = \{s_2\} \cup \{s_5\} \cup \{s_9\}
\]</span></p>
<p>We can compute the probability of <span class="math inline">\(A\)</span> as follows</p>
<p><span class="math display">\[
\begin{aligned}
P(A) &amp;= P(\{s_2\}) + P(\{s_5\}) + P(\{s_9\}) \\
&amp;= p + p + p \\
&amp;= 3 p \\
&amp;= 3 \left(\frac{1}{n}\right) \\
&amp;= \frac{3}{n} \\
&amp;= \frac{n_A}{n} \\
&amp;= \frac{\text{number of outcomes within }A}{\text{number of possible outcomes}}
\end{aligned}
\]</span> where <span class="math inline">\(n_A\)</span> is the number of outcomes within <span class="math inline">\(A\)</span> and <span class="math inline">\(n\)</span> is the total number of possible outcomes in <span class="math inline">\(S\)</span>.</p>
</section></section><section id="glossary" class="level2" data-number="8"><h2 data-number="8" class="anchored" data-anchor-id="glossary">
<span class="header-section-number">8</span> Glossary</h2>
<ul>
<li>
<strong>Random experiment.</strong> A process or phenomenon which can have two ore more possible outcomes.</li>
<li>
<strong>Trial.</strong> A single repetition of the experiment</li>
<li>
<strong>Outcome.</strong> The value observed after running a trial</li>
<li>
<strong>Sample space.</strong> The collection of all possible outcomes. The sample space is denoted <span class="math inline">\(S\)</span> and has probability 1.</li>
<li>
<strong>Event.</strong> Either a single outcome (simple event) or a collection of outcomes (compound event).</li>
<li>
<strong>Probability.</strong> A number reporting how likely is an even to occur when performing a trial (that is, obtaining an outcome within that event or satisfying the proposition of the event)</li>
<li>
<strong>Disjoint (or mutually exclusive) events.</strong> Two events <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> are disjoint if they share no outcomes in common. For disjoint events, knowing that one event occurs tells us that the other cannot occur.</li>
<li>
<strong>Independent events.</strong> Two events are independent if learning that one event occurs does not change the probability that the other event occurs.</li>
<li>
<strong>Probability assignment rule.</strong> Says that the probability of any event must be between 0 (the probability of an impossible event) and 1 (the probability of a certain event).</li>
<li>
<strong>Total probability rule.</strong> The probability that the experiment’s outcome is in the sample space must be 1.</li>
<li>
<strong>Complement rule.</strong> If <span class="math inline">\(P(A)\)</span> denotes the probability of the event <span class="math inline">\(A\)</span> occurring, the probability of the complement of A is <span class="math inline">\(P(A^c) = 1 - P(A)\)</span>.</li>
<li>
<strong>Addition rule for disjoint events.</strong> If <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> are disjoint events, then <span class="math inline">\(P(A \cup B) = P(A) + P(B)\)</span>.</li>
<li>
<strong>Multiplication rule for independent events.</strong> If A and B are independent events, then <span class="math inline">\(P(A \cap B) = P(A) \times P(B)\)</span>.</li>
</ul>


</section><a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>
<ol>
<li id="fn1"><p>In the die example, 1 has nothing in common with 2, 2 has nothing in common with 3, and so on.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>