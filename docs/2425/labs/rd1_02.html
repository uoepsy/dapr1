<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.53">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Categorical data – DAPR1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script>
function toggle_visibility(id1, id2) {
var e = document.getElementById(id1);
var f = document.getElementById(id2);
e.style.display = ((e.style.display!='none') ? 'none' : 'block');
if(f.classList.contains('fa-chevron-circle-right')) {
    f.classList.add('fa-chevron-circle-down')
    f.classList.remove('fa-chevron-circle-right')
} else {
    f.classList.add('fa-chevron-circle-right')
    f.classList.remove('fa-chevron-circle-down')
}
}
</script><script src="https://kit.fontawesome.com/120b08a6f5.js" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script><link rel="stylesheet" href="assets/styles.css">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">DAPR1</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-lab-materials" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Lab Materials</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-lab-materials">
<li class="dropdown-header"><b>Block 1: Exploratory data analysis</b></li>
        <li>
    <a class="dropdown-item" href="./1_01_design_and_data.html">
 <span class="dropdown-text">S1-W1: Research design &amp; data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_02_categorical_data.html">
 <span class="dropdown-text">S1-W2: Categorical data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_03_numeric_data.html">
 <span class="dropdown-text">S1-W3: Numeric data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_04_relationships.html">
 <span class="dropdown-text">S1-W4: Relationships</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_05_formative_report_a.html">
 <span class="dropdown-text">S1-W5: Formative Report A</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header"><b>Block 2: Probability</b></li>
        <li>
    <a class="dropdown-item" href="./1_07_prob_theory.html">
 <span class="dropdown-text">S1-W7: Probability Theory</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_08_prob_rules.html">
 <span class="dropdown-text">S1-W8: Probability Rules</span></a>
  </li>  
    </ul>
</li>
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-readings" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Readings</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-readings">
<li class="dropdown-header"><b>Block 1: Exploratory data analysis</b></li>
        <li>
    <a class="dropdown-item" href="./rd1_01.html">
 <span class="dropdown-text">S1-W1: Getting started with R and RStudio</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./rd1_02.html">
 <span class="dropdown-text">S1-W2: Categorical data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./rd1_03.html">
 <span class="dropdown-text">S1-W3: Numeric data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./rd1_04.html">
 <span class="dropdown-text">S1-W4: Relationships</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./rd1_05.html">
 <span class="dropdown-text">S1-W5: Functions</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header"><b>Block 2: Probability</b></li>
        <li>
    <a class="dropdown-item" href="./rd1_07.html">
 <span class="dropdown-text">S1-W7: Probability 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./rd1_08.html">
 <span class="dropdown-text">S1-W8: Probability 2</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li><a href="#a-different-style-of-r-code" id="toc-a-different-style-of-r-code" class="nav-link active" data-scroll-target="#a-different-style-of-r-code"><span class="header-section-number">1</span> A different style of R code</a></li>
  <li><a href="#data-exploration" id="toc-data-exploration" class="nav-link" data-scroll-target="#data-exploration"><span class="header-section-number">2</span> Data Exploration</a></li>
  <li>
<a href="#unordered-categorical-nominal-data" id="toc-unordered-categorical-nominal-data" class="nav-link" data-scroll-target="#unordered-categorical-nominal-data"><span class="header-section-number">3</span> Unordered Categorical (Nominal) Data</a>
  <ul class="collapse">
<li><a href="#frequency-table" id="toc-frequency-table" class="nav-link" data-scroll-target="#frequency-table">Frequency table</a></li>
  <li><a href="#central-tendency" id="toc-central-tendency" class="nav-link" data-scroll-target="#central-tendency">Central tendency</a></li>
  <li><a href="#relative-frequencies" id="toc-relative-frequencies" class="nav-link" data-scroll-target="#relative-frequencies">Relative frequencies</a></li>
  <li><a href="#visualising" id="toc-visualising" class="nav-link" data-scroll-target="#visualising">Visualising</a></li>
  </ul>
</li>
  <li>
<a href="#ordered-categorical-ordinal-data" id="toc-ordered-categorical-ordinal-data" class="nav-link" data-scroll-target="#ordered-categorical-ordinal-data"><span class="header-section-number">4</span> Ordered Categorical (Ordinal) Data</a>
  <ul class="collapse">
<li><a href="#frequency-table-1" id="toc-frequency-table-1" class="nav-link" data-scroll-target="#frequency-table-1">Frequency table</a></li>
  <li><a href="#central-tendency-1" id="toc-central-tendency-1" class="nav-link" data-scroll-target="#central-tendency-1">Central tendency</a></li>
  <li><a href="#cumulative-percentages-quartiles" id="toc-cumulative-percentages-quartiles" class="nav-link" data-scroll-target="#cumulative-percentages-quartiles">Cumulative percentages, Quartiles</a></li>
  <li><a href="#visualising-1" id="toc-visualising-1" class="nav-link" data-scroll-target="#visualising-1">Visualising</a></li>
  </ul>
</li>
  <li><a href="#glossary" id="toc-glossary" class="nav-link" data-scroll-target="#glossary"><span class="header-section-number">5</span> Glossary</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Categorical data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="a-different-style-of-r-code" class="level2" data-number="1"><h2 data-number="1" class="anchored" data-anchor-id="a-different-style-of-r-code">
<span class="header-section-number">1</span> A different style of R code</h2>
<p>Before we get started on the statistics, we’re going to briefly introduce a crucial bit of R code. We have seen already seen a few examples of R code such as:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># show the dimensions of the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">somedata</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># show a summary of the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">somedata</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># factorise and show the "somevariable" variable in the "somedata" dataframe </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">somedata</span><span class="op">$</span><span class="va">somevariable</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And we can actually wrap functions inside functions:</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># factorise the "somevariable" variable in the "somedata" dataframe, </span></span>
<span><span class="co"># then show a summary of it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">somedata</span><span class="op">$</span><span class="va">somevariable</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>R evaluates code from the inside-out!</strong></p>
<p>You can end up with functions inside functions inside functions …</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Don't worry about what all these functions do, </span></span>
<span><span class="co"># it's just an example -</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diff.html">diff</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>We can write in a different style, however, and this may help to keep code tidy and easily readable - we can write <strong>sequentially</strong>:</p>
<p><img src="images/categorical/pipes.png" class="img-fluid"></p>
<p>Notice that what we are doing is using a new symbol: <code>|&gt;</code><br>
This symbol takes the output of whatever is on it’s left-hand side, and uses it as an <em>input</em> for whatever is on the right-hand side. The <code>|&gt;</code> symbol gets called a “pipe”.</p>
<p>Let’s see it in action with the starwars2 dataset. The data contains information on various characteristics of characters from Star Wars. Before we can use the pipe operator, <code>|&gt;</code>, we need to load the tidyverse packages, because that is where <code>|&gt;</code> is found.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com">patchwork</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">starwars2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://uoepsy.github.io/data/starwars2.csv"</span><span class="op">)</span></span>
<span><span class="va">starwars2</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  name           height hair_color  eye_color homeworld species
  &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;  
1 Luke Skywalker    172 blond       blue      Tatooine  Human  
2 C-3PO             167 &lt;NA&gt;        yellow    Tatooine  Human  
3 R2-D2              96 &lt;NA&gt;        red       Naboo     Droid  
4 Darth Vader       202 none        yellow    Tatooine  Human  
5 Leia Organa       150 brown       brown     Alderaan  Human  
6 Owen Lars         178 brown, grey blue      Tatooine  Human  </code></pre>
</div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">starwars2</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name               height       hair_color         eye_color        
 Length:75          Min.   : 79.0   Length:75          Length:75         
 Class :character   1st Qu.:167.5   Class :character   Class :character  
 Mode  :character   Median :180.0   Mode  :character   Mode  :character  
                    Mean   :176.1                                        
                    3rd Qu.:191.0                                        
                    Max.   :264.0                                        
  homeworld           species         
 Length:75          Length:75         
 Class :character   Class :character  
 Mode  :character   Mode  :character  
                                      
                                      
                                      </code></pre>
</div>
</div>
<p>We can now write code that requires reading it from the inside-out:</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">starwars2</span><span class="op">$</span><span class="va">homeworld</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>or which requires reading it from left to right:</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">starwars2</span><span class="op">$</span><span class="va">homeworld</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Alderaan    Aleen Minor         Bespin     Bestine IV Cato Neimoidia 
             3              1              1              1              1 
         Cerea       Champala      Chandrila   Concord Dawn       Corellia 
             1              1              1              1              2 
     Coruscant       Dathomir          Dorin          Endor         Eriadu 
             3              1              1              1              1 
      Geonosis    Glee Anselm     Haruun Kal        Iktotch       Iridonia 
             1              1              1              1              1 
         Kalee         Kamino       Kashyyyk      Malastare         Mirial 
             1              3              2              1              2 
      Mon Cala     Muunilinst          Naboo      Nal Hutta           Ojom 
             1              1              8              1              1 
       Quermia          Rodia         Ryloth        Serenno          Shili 
             1              1              2              1              1 
         Skako        Socorro    Springfield        Stewjon        Sullust 
             1              1              2              1              1 
      Tatooine       Toydaria      Trandosha        Troiken           Tund 
            10              1              1              1              1 
        Utapau        Vulpter          Zolan 
             1              1              1 </code></pre>
</div>
</div>
<p>And that long line of code from above:</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># again, don't worry about all these functions, </span></span>
<span><span class="co"># just notice the difference in the two styles.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/diff.html">diff</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>becomes:</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/diff.html">diff</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We’re going to use this way of writing a lot throughout the course, and it pairs really well with a group of functions in the <strong>tidyverse</strong> packages, which were designed to be used in conjunction with <code>|&gt;</code>.</p>
</section><section id="data-exploration" class="level2" data-number="2"><h2 data-number="2" class="anchored" data-anchor-id="data-exploration">
<span class="header-section-number">2</span> Data Exploration</h2>
<p>Once we have collected some data, one of the first things we want to do is explore it - and we can do this through describing (or summarising) and visualising variables.</p>
<p>We are already familiar with the function <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>, which provides high-level information about our data, showing us things such as the minimum and maximum and mean of continuous variables, or the numbers of entries falling into each possible response level for a categorical variable:</p>
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">starwars2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name               height       hair_color         eye_color        
 Length:75          Min.   : 79.0   Length:75          Length:75         
 Class :character   1st Qu.:167.5   Class :character   Class :character  
 Mode  :character   Median :180.0   Mode  :character   Mode  :character  
                    Mean   :176.1                                        
                    3rd Qu.:191.0                                        
                    Max.   :264.0                                        
  homeworld           species         
 Length:75          Length:75         
 Class :character   Class :character  
 Mode  :character   Mode  :character  
                                      
                                      
                                      </code></pre>
</div>
</div>
<p>What we are doing here is providing numeric descriptions of the <strong>distributions</strong> of values in each variable.</p>
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Distribution</strong></p>
<p>The distribution of a variable shows how often different values occur. We’re going to focus on describing and visualising distributions of categorical data.</p>
<p>The graph showing the distribution of a variable shows us where the values are centred, how the values vary, and gives some information about where a typical value might fall. It can also alert you to the presence of outliers (unexpected observations).</p>
</div>
</div>
</div>
</section><section id="unordered-categorical-nominal-data" class="level2" data-number="3"><h2 data-number="3" class="anchored" data-anchor-id="unordered-categorical-nominal-data">
<span class="header-section-number">3</span> Unordered Categorical (Nominal) Data</h2>
<p>For variables with a discrete number of response options, we can easily measure “how often” values occur in terms of their <strong>frequency</strong>.</p>
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Frequency distribution</strong></p>
<p>A frequency distribution is an overview of all distinct values in some variable and the <strong>number of times</strong> they occur.</p>
</div>
</div>
</div>
<p>Supposing that we have surveyed the people working in a psychology department and asked them what sub-discipline of psychological research they most strongly identify as working within (If you would like to work along with the reading, the data is available at https://uoepsy.github.io/data/psych_survey.csv).</p>
<table class="caption-top table">
<thead><tr class="header">
<th>Variable Name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>participant</td>
<td>Subject identifier</td>
</tr>
<tr class="even">
<td>area</td>
<td>Respondent’s sub-discpline of psychology</td>
</tr>
</tbody>
</table>
<p><br> First, we read our data in to R and store it in an object called “psych_disciplines”:</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">psych_disciplines</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://uoepsy.github.io/data/psych_survey.csv"</span><span class="op">)</span></span>
<span><span class="va">psych_disciplines</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 74 × 2
   participant   area                  
   &lt;chr&gt;         &lt;chr&gt;                 
 1 respondent_1  Differential          
 2 respondent_2  Social                
 3 respondent_3  Differential          
 4 respondent_4  Social                
 5 respondent_5  Differential          
 6 respondent_6  Differential          
 7 respondent_7  Language              
 8 respondent_8  Language              
 9 respondent_9  Cognitive Neuroscience
10 respondent_10 Language              
# ℹ 64 more rows</code></pre>
</div>
</div>
<p>We can get the frequencies of different response levels of the <em>discipline</em> variable by using the following code:</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># start with the psych_disciplines dataframe </span></span>
<span><span class="co"># |&gt;</span></span>
<span><span class="co"># count() the values in the "area" variable </span></span>
<span><span class="va">psych_disciplines</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">area</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  area                       n
  &lt;chr&gt;                  &lt;int&gt;
1 Cognitive Neuroscience    24
2 Developmental             10
3 Differential              20
4 Language                   9
5 Social                    11</code></pre>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Extra detail on how this works
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>In the code above, R knows to look for the <em>area</em> variable inside the psych_disciplines data because we used <code>|&gt;</code> to “pipe” in the psych_disciplines dataframe.<br>
We could have also done:</p>
<div class="cell">
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># count(data, variable)</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">psych_disciplines</span>, <span class="va">area</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  area                       n
  &lt;chr&gt;                  &lt;int&gt;
1 Cognitive Neuroscience    24
2 Developmental             10
3 Differential              20
4 Language                   9
5 Social                    11</code></pre>
</div>
</div>
<p>But this would not work:</p>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">area</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p style="color:red">
Error in group_vars(x) : object ‘area’ not found
</p>
</div>
</div>
</div>
<section id="frequency-table" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="frequency-table">Frequency table</h3>
<p>To describe a distribution like this, we can simply provide the frequency table.<br>
Let’s store it as an object in R:</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># make a new object called "freq_table", and assign it:</span></span>
<span><span class="co"># the counts of values of "area" variable in </span></span>
<span><span class="co"># the psych_discipline dataframe.</span></span>
<span><span class="va">freq_table</span> <span class="op">&lt;-</span> </span>
<span>    <span class="va">psych_disciplines</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">area</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># show the object called "freq_table"</span></span>
<span><span class="va">freq_table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  area                       n
  &lt;chr&gt;                  &lt;int&gt;
1 Cognitive Neuroscience    24
2 Developmental             10
3 Differential              20
4 Language                   9
5 Social                    11</code></pre>
</div>
</div>
<p>For a report, we might want to make it a little more easily readable:</p>
</section><section id="central-tendency" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="central-tendency">Central tendency</h3>
<p>Often, we might want to summarise data into a single summary value, reflecting the point at (or around) which most of the values tend to cluster. This is known as a measure of <strong>central tendency.</strong> For numeric data, we can use measures such as the mean, which you will likely have heard of. For nominal data (unordered categorical data), however, our only option is to use the <strong>mode</strong>.</p>
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Mode</strong></p>
<p>The most frequent value (the value that occurs the greatest number of times).</p>
</div>
</div>
</div>
<p>In our case, the mode is the “Cognitive Neuroscience” category.</p>
</section><section id="relative-frequencies" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="relative-frequencies">Relative frequencies</h3>
<p>We might alternatively want to show the <em>percentage</em> of respondents in each category, rather than the raw frequencies.<br>
The percentages show the <strong>relative frequency distribution</strong></p>
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Relative frequency distribution</strong></p>
<p>A relative frequency distribution shows the <strong>proportion of times</strong> each value occurs<br>
(contrast this with the frequency distribution which shows the <strong>number</strong> of times).<br>
Relative frequencies can be written as fractions, percents, or decimals.</p>
</div>
</div>
</div>
<p>In the object “freq_table”, we have a variable called <em>n</em>, which is the frequencies (the number in each category).<br>
The total of this column is equal to the total number of respondents:</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># sum all the values in the "n" variable in the "freq_table" object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">freq_table</span><span class="op">$</span><span class="va">n</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 74</code></pre>
</div>
</div>
<p>And therefore, each value in <code>freq_table$n</code>, divided by the total, is equal to the proportion in each category:<br>
( <strong>Tip:</strong> Proportions are percentages/100. So 0.4 is another way of expressing 40%)</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># take the values in the "n" variable from the "freq_table" object, </span></span>
<span><span class="co"># and divide by the sum of all the values in the "n" variable in "freq_table"</span></span>
<span><span class="va">freq_table</span><span class="op">$</span><span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">freq_table</span><span class="op">$</span><span class="va">n</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3243243 0.1351351 0.2702703 0.1216216 0.1486486</code></pre>
</div>
</div>
<p>We can then simply add the proportions as a new column to our table of frequencies by assigning the values we just calculated to a new variable:</p>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># the variable "prop" in the "freq_table" object is now assigned </span></span>
<span><span class="co"># the values we calculated above (the proportions)</span></span>
<span><span class="va">freq_table</span><span class="op">$</span><span class="va">prop</span> <span class="op">&lt;-</span> <span class="va">freq_table</span><span class="op">$</span><span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">freq_table</span><span class="op">$</span><span class="va">n</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print the "freq_table" object</span></span>
<span><span class="va">freq_table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  area                       n  prop
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt;
1 Cognitive Neuroscience    24 0.324
2 Developmental             10 0.135
3 Differential              20 0.270
4 Language                   9 0.122
5 Social                    11 0.149</code></pre>
</div>
</div>
<p><br> However, we can also do this within a sequence of pipes (<code>|&gt;</code>). To do so, we use a new function called <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>.</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
mutate
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> function is used to add or modify variables to data.</p>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># take the data</span></span>
<span><span class="co"># |&gt;</span></span>
<span><span class="co"># mutate it, such that there is a variable called "newvariable", which</span></span>
<span><span class="co"># has the values of a variable called "oldvariable" multiplied by two.</span></span>
<span><span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    newvariable <span class="op">=</span> <span class="va">oldvariable</span> <span class="op">*</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Note:</strong> Inside <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>, we don’t have to keep using the dollar sign <code>$</code>, as we have already told it what data to look for variables in.</p>
<p>To ensure that our additions/modifications of variables are stored in R’s environment (rather than simply printed out), we need to <em>reassign</em> the name of our dataframe:</p>
<div class="cell">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    newvariable <span class="op">=</span> <span class="va">oldvariable</span> <span class="op">*</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>We can actually <em>add this step to our earlier code:</em></p>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># make a new object called "freq_table", and assign it:</span></span>
<span><span class="co"># the counts of values of "area" variable in </span></span>
<span><span class="co"># the psych_discipline dataframe.</span></span>
<span><span class="co"># from there, 'mutate' such that there is a variable called "prop" which</span></span>
<span><span class="co"># has the values of the "n" variable divided by the sum of the "n" variable.</span></span>
<span><span class="va">freq_table</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">psych_disciplines</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">area</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    prop <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># show the object called "freq_table"</span></span>
<span><span class="va">freq_table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  area                       n  prop
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt;
1 Cognitive Neuroscience    24 0.324
2 Developmental             10 0.135
3 Differential              20 0.270
4 Language                   9 0.122
5 Social                    11 0.149</code></pre>
</div>
</div>
</section><section id="visualising" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="visualising">Visualising</h3>
<blockquote class="blockquote">
<p>“By visualizing information, we turn it into a landscape that you can explore with your eyes. A sort of information map. And when you’re lost in information, an information map is kind of useful.”_ <a href="https://informationisbeautiful.net/">David McCandless</a></p>
</blockquote>
<p>We’re going to now make our first steps into the world of data visualisation. R is an incredibly capable language for creating visualisations of almost any kind. It is used by many media companies (e.g., the BBC), and has the capability of producing 3d visualisations, animations, interactive graphs, and more.</p>
<p>We are going to use the most popular R package for visualisation, <strong>ggplot2</strong>. This is actually part of the <strong>tidyverse</strong>, so if we have an Rmarkdown document and have loaded the <strong>tidyverse</strong> packages at the start (by using <code><a href="https://tidyverse.tidyverse.org">library(tidyverse)</a></code>), then <strong>ggplot2</strong> will be loaded too).</p>
<p>Recall our <strong>frequency distribution table:</strong></p>
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># show the object called "freq_table"</span></span>
<span><span class="va">freq_table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  area                       n  prop
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt;
1 Cognitive Neuroscience    24 0.324
2 Developmental             10 0.135
3 Differential              20 0.270
4 Language                   9 0.122
5 Social                    11 0.149</code></pre>
</div>
</div>
<p>We can plot these values as a bar chart:</p>
<div class="cell">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">freq_table</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">area</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="rd1_02_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/categorical/ggplot2_masterpiece.png" class="img-fluid figure-img"></p>
<figcaption>Artwork by @allison_horst</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>ggplot components</strong></p>
<p>Note the key components of the ggplot code.</p>
<ul>
<li>
<code>data =</code> where we provide the name of the dataframe.</li>
<li>
<code>aes =</code> where we provide the <em>aesthetics</em>. These are things which we map from the data to the graph. For instance, the x-axis, or if we wanted to colour the columns/bars according to some aspect of the data.</li>
</ul>
<p>Then we add (using <code>+</code>) some <em>geometry</em>. These are the shapes (in our case, the columns/bars), which will be put in the correct place according to what we specified in <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code>.</p>
<ul>
<li>
<code>+ geom_col()</code> Adds columns to the plot.</li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Optional - Different aes() and geoms, and labels
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Use these as reference for when you want to make changes to the plots you create.<br>
Additionall, remember that google is your friend - there are endless forums with people asking how to do something in ggplot, and you can just copy and paste bits of code to add to your plots!</p>
<ol type="1">
<li>Fill the geoms:</li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">freq_table</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">area</span>, y <span class="op">=</span> <span class="va">n</span>, fill <span class="op">=</span> <span class="va">area</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="rd1_02_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Change the axis labels:</li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">freq_table</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">area</span>, y <span class="op">=</span> <span class="va">n</span>, fill <span class="op">=</span> <span class="va">area</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Counts of respondents by sub-discipline"</span>, y <span class="op">=</span> <span class="st">"Number of respondents"</span>, x <span class="op">=</span> <span class="st">"Sub-discipline"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="rd1_02_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Change the geom:<br>
(Note that using <code>geom_col</code> had the y axis starting at 0, but geom_point starts just below the lowest value.</li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># note that we also need to change "fill = area" to "col = area". </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">freq_table</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">area</span>, y <span class="op">=</span> <span class="va">n</span>, col <span class="op">=</span> <span class="va">area</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Counts of respondents by sub-discipline"</span>, y <span class="op">=</span> <span class="st">"Number of respondents"</span>, x <span class="op">=</span> <span class="st">"Sub-discipline"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="rd1_02_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="4" type="1">
<li>Change the limits of the axes:</li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">freq_table</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">area</span>, y <span class="op">=</span> <span class="va">n</span>, fill <span class="op">=</span> <span class="va">area</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Counts of respondents by sub-discipline"</span>, y <span class="op">=</span> <span class="st">"Number of respondents"</span>, x <span class="op">=</span> <span class="st">"Sub-discipline"</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">50</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="rd1_02_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="5" type="1">
<li>Remove (or reposition) the legend:</li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># setting legend.position as "bottom" would put it at the bottom!</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">freq_table</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">area</span>, y <span class="op">=</span> <span class="va">n</span>, fill <span class="op">=</span> <span class="va">area</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Counts of respondents by sub-discipline"</span>, y <span class="op">=</span> <span class="st">"Number of respondents"</span>, x <span class="op">=</span> <span class="st">"Sub-discipline"</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">50</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="rd1_02_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ol start="6" type="1">
<li>Changing the theme:</li>
</ol>
<div class="cell">
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># there are many predefine themes, including: </span></span>
<span><span class="co"># theme_bw(), theme_classic(), theme_light()</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">freq_table</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">area</span>, y <span class="op">=</span> <span class="va">n</span>, fill <span class="op">=</span> <span class="va">area</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Counts of respondents by sub-discipline"</span>, y <span class="op">=</span> <span class="st">"Number of respondents"</span>, x <span class="op">=</span> <span class="st">"Sub-discipline"</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">50</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="rd1_02_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section></section><section id="ordered-categorical-ordinal-data" class="level2" data-number="4"><h2 data-number="4" class="anchored" data-anchor-id="ordered-categorical-ordinal-data">
<span class="header-section-number">4</span> Ordered Categorical (Ordinal) Data</h2>
<p>Recall that <strong>ordinal</strong> data is categorical data which has a natural ordering of the possible responses. One of the most common examples of ordinal data which you will encounter in psychology is the <strong>Likert Scale</strong>. You will probably have come across these before, perhaps when completing online surveys or questionnaires.</p>
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Likert Scale</strong></p>
<p>A five or seven point scale on which an individual express how much they agree or disagree with a particular statement.</p>
</div>
</div>
</div>
<p>With Likert data, there is a set of discrete response options (it is <strong>categorical</strong> data). The response options can be ranked, making it <strong>ordered categorical</strong> ( <em>strongly disagree</em> &lt; <em>disagree</em> &lt; <em>neither</em> &lt; <em>agree</em> &lt; <em>strongly agree</em> ). Importantly, the distance between responses is <strong>not</strong> measurable.</p>
<section id="frequency-table-1" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="frequency-table-1">Frequency table</h3>
<p>Let’s suppose that as well as collecting information on the sub-discipline of psychology they identified with, we also asked our respondents to rate their level of happiness from 1 to 5, as well as their job satisfaction from 1 to 5.</p>
<table class="caption-top table">
<thead><tr class="header">
<th>Variable Name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>participant</td>
<td>Subject identifier</td>
</tr>
<tr class="even">
<td>happiness</td>
<td>Respondent’s level of happiness from 1 to 5</td>
</tr>
<tr class="odd">
<td>job_sat</td>
<td>Respondent’s level of job satisfaction from 1 to 5</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">psych_survey</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://uoepsy.github.io/data/psych_survey2.csv"</span><span class="op">)</span></span>
<span><span class="va">psych_survey</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 74 × 3
   participant   happiness job_sat
   &lt;chr&gt;             &lt;dbl&gt;   &lt;dbl&gt;
 1 respondent_1          3       3
 2 respondent_2          3       4
 3 respondent_3          2       5
 4 respondent_4          4       5
 5 respondent_5          3       5
 6 respondent_6          4       4
 7 respondent_7          4       2
 8 respondent_8          5       5
 9 respondent_9          1       5
10 respondent_10         3       4
# ℹ 64 more rows</code></pre>
</div>
</div>
<p>For these questions (variables <em>happiness</em> and <em>job_sat</em>), we could do the same thing as we did above for unordered categorical data, and summarise this into frequencies:</p>
<div class="cell">
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># take the "psych_survey" dataframe |&gt;</span></span>
<span><span class="co"># count() the values in the "happiness" variable </span></span>
<span><span class="va">psych_survey</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">happiness</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  happiness     n
      &lt;dbl&gt; &lt;int&gt;
1         1     6
2         2    13
3         3    27
4         4    21
5         5     7</code></pre>
</div>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># take the "psych_survey" dataframe |&gt;</span></span>
<span><span class="co"># count() the values in the "job_sat" variable </span></span>
<span><span class="va">psych_survey</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">job_sat</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  job_sat     n
    &lt;dbl&gt; &lt;int&gt;
1       1     3
2       2     6
3       3    11
4       4    16
5       5    38</code></pre>
</div>
</div>
</section><section id="central-tendency-1" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="central-tendency-1">Central tendency</h3>
<p>We could again use the <strong>Mode</strong> - the most common value - to summarise this data. However, because the responses are <strong>ordered</strong>, it can be more useful to think about the percentages of respondents in and below/above each category. For instance, we might want to talk about asking which category has 50% of the observations in a lower category, and 50% of the observations in a higher category. This is mid-point is known as the <strong>Median</strong>.</p>
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Median</strong></p>
<p>The value for which 50% of observations a lower and 50% are higher. It is the mid-point of a list of ordered values.</p>
<p>To find the median:</p>
<ol type="1">
<li>rank order the values</li>
<li>find the middle value:
<ul>
<li>If there are <span class="math inline">\(n\)</span> values, find the value at position <span class="math inline">\(\frac{n+1}{2}\)</span>.<br>
</li>
<li>If <span class="math inline">\(n\)</span> is even, <span class="math inline">\(\frac{n+1}{2}\)</span> will not be a whole number.<br>
For instance, if <span class="math inline">\(n = 20\)</span>, you are looking for the <span class="math inline">\(\frac{n+1}{2} = \frac{20+1}{2} = 10.5^{th}\)</span> value.
<ul>
<li>When calculating the <strong>median for ordinal data,</strong> if the <span class="math inline">\(\frac{n}{2}^{th}\)</span> and <span class="math inline">\(\frac{n+1}{2}^{th}\)</span> values are different, report both.</li>
<li>When calculating the <strong>median for numeric data,</strong> report the midpoint of the <span class="math inline">\(\frac{n}{2}^{th}\)</span> and <span class="math inline">\(\frac{n+1}{2}^{th}\)</span> values.</li>
</ul>
</li>
</ul>
</li>
</ol>
</div>
</div>
</div>
<p>You can tell R explicitly that a variable is of a certain type using functions such as <code><a href="https://rdrr.io/r/base/factor.html">as.factor()</a></code>, <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code>, and so on.<br>
You may notice that we haven’t done this yet with the data we have been working with in so far today:</p>
<div class="cell">
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># inside the "psych_survey" dataframe, take ($) the "happiness" variable,</span></span>
<span><span class="co"># and tell me what type/class it is</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">psych_survey</span><span class="op">$</span><span class="va">happiness</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<p>This is because <em>there are some benefits to letting R think your data is numeric, even when it is not.</em> It means we can use functions such as <code><a href="https://rdrr.io/r/stats/median.html">median()</a></code> to quickly find the median:</p>
<div class="cell">
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># inside the "psych_survey" dataframe, take ($) the "happiness" variable,</span></span>
<span><span class="co"># and find the median</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">psych_survey</span><span class="op">$</span><span class="va">happiness</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution!
</div>
</div>
<div class="callout-body-container callout-body">
<p>While we can make R treat this data is numeric, it is important to remember that it is actually measured on an <strong>ordinal</strong> scale.</p>
<p>For example, if the median falls <em>between</em> levels, R will tell us that the median is the mid-point:</p>
<div class="cell">
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># for the values 2,1,2,3,4,5, </span></span>
<span><span class="co"># find the median</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">5</span>,<span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.5</code></pre>
</div>
</div>
<p>But because our data is ordinal, then we know that 2.5 is not a valid response.</p>
</div>
</div>
<p>We can also use functions such as <code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code> and <code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code> to find the minimum and maximum values:</p>
<div class="cell">
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># inside the "psych_survey" dataframe, take ($) the "happiness" variable,</span></span>
<span><span class="co"># and find the minimum value</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">psych_survey</span><span class="op">$</span><span class="va">happiness</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># and find the maximum value</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">psych_survey</span><span class="op">$</span><span class="va">happiness</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
</section><section id="cumulative-percentages-quartiles" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="cumulative-percentages-quartiles">Cumulative percentages, Quartiles</h3>
<p>In calculating the median, we are going beyond talking about the <strong>relative frequencies</strong> (i.e., the percentage in each category), to talking about the <strong>cumulative percentage.</strong></p>
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Cumulative percentage</strong></p>
<p>Cumulative percentages are another way of expressing a frequency distribution.<br>
They are the <strong>successive addition of percentages</strong> in each category. For example, the cumulative percentage for the 3rd category is the percentage of respondents in the 1st, 2nd and 3rd category:</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 11%">
<col style="width: 20%">
<col style="width: 23%">
<col style="width: 21%">
<col style="width: 22%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Category</th>
<th style="text-align: right;">Frequency count (n)</th>
<th style="text-align: right;">Relative frequency (%)</th>
<th style="text-align: right;">Cumulative frequency</th>
<th style="text-align: right;">Cumulative percentage</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Response 1</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">13.33</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">13.33</td>
</tr>
<tr class="even">
<td style="text-align: left;">Response 2</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">13.33</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">26.67</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Response 3</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">26.67</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">53.33</td>
</tr>
<tr class="even">
<td style="text-align: left;">Response 4</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">33.33</td>
<td style="text-align: right;">65</td>
<td style="text-align: right;">86.67</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Response 5</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">13.33</td>
<td style="text-align: right;">75</td>
<td style="text-align: right;">100.00</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<p>We saw before how we can calculate the proportions/percentages in each category:<br>
( <strong>Note:</strong> We multiply by 100 here to turn the proportion into a percentage)</p>
<div class="cell">
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># take the "psych_survey" dataframe |&gt;</span></span>
<span><span class="co"># count() the values in the "happiness" variable (creates an "n" column), and</span></span>
<span><span class="co"># from there, 'mutate' such that there is a variable called "percent" which</span></span>
<span><span class="co"># has the values of the "n" variable divided by the sum of the "n" variable.</span></span>
<span><span class="va">psych_survey</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">happiness</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    percent <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  happiness     n percent
      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;
1         1     6    8.11
2         2    13   17.6 
3         3    27   36.5 
4         4    21   28.4 
5         5     7    9.46</code></pre>
</div>
</div>
<p>We can add another variable, and make it the cumulative percentage, by using the <code><a href="https://rdrr.io/r/base/cumsum.html">cumsum()</a></code> function.</p>
<div class="cell">
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># take the "psych_survey" dataframe |&gt;</span></span>
<span><span class="co"># count() the values in the "happiness" variable (creates an "n" column), and</span></span>
<span><span class="co"># from there, 'mutate' such that there is a variable called "percent" which</span></span>
<span><span class="co"># has the values of the "n" variable divided by the sum of the "n" variable,</span></span>
<span><span class="co"># and also make a variable called "cumulative_percent" which is the </span></span>
<span><span class="co"># successive addition of the values in the "percent" variable</span></span>
<span><span class="va">psych_survey</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">happiness</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    percent <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span>,</span>
<span>    cumulative_percent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">percent</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  happiness     n percent cumulative_percent
      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;              &lt;dbl&gt;
1         1     6    8.11               8.11
2         2    13   17.6               25.7 
3         3    27   36.5               62.2 
4         4    21   28.4               90.5 
5         5     7    9.46             100   </code></pre>
</div>
</div>
<div class="callout callout-style-simple callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Think about it
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Think about why this will not work:</p>
<div class="cell">
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">psych_survey</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">happiness</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    cumulative_percent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">percent</span><span class="op">)</span>,</span>
<span>    percent <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p style="color:red">
Error: object ‘percent’ not found
</p>
<p><strong>Answer:</strong> Inside the <code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> function, we are trying to assign the <em>cumulative_percent</em> variable based on the values of the <em>percent</em> variable. But in the code above, <em>percent</em> gets defined <strong>after</strong> <em>cumulative_percent</em>, and so it will not work. Hence the error message (“percent not found”).</p>
</div>
</div>
</div>
<p>While the <strong>median</strong> splits the data in two (50% either side), you will often see data being split into four equal blocks.<br>
The points which divide the four blocks are known as <strong>quartiles</strong>.</p>
<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Quartiles</strong></p>
<p>Quartiles are the points in rank-ordered data below which falls 25%, 50%, and 75% of the data.</p>
<ul>
<li>The first quartile is the first category for which the cumulative percentage is <span class="math inline">\(\geq 25\%\)</span>.<br>
</li>
<li>The median is the first category for which the cumulative percentage is <span class="math inline">\(\geq 50\%\)</span>.<br>
</li>
<li>The third quartile is the first category for which the cumulative percentage is <span class="math inline">\(\geq 75\%\)</span>.</li>
</ul>
</div>
</div>
</div>
<p>By looking at the quartiles, it gives us an idea of <em>how spread out the data is</em>.<br>
As an example, if we had 10 categories <em>A, B, C, D, E, F, G, H, I, J</em>, and we knew that:</p>
<ul>
<li>
<span class="math inline">\(Q_1\)</span> (the <span class="math inline">\(1^{st}\)</span> quartile) = <em>G</em>,</li>
<li>
<span class="math inline">\(Q_2\)</span> (the <span class="math inline">\(2^{nd}\)</span> quartile, the <strong>median</strong>) = <em>H</em>,</li>
<li>
<span class="math inline">\(Q_3\)</span> (the <span class="math inline">\(3^{rd}\)</span> quartile) = <em>H</em>,</li>
</ul>
<p>This tells us that the first 25% of the data falls in one of the categories from <em>A</em> to <em>G</em> (quite a large range), the second 25% falls in categories <em>G</em> and <em>H</em> (a small range), and the third 25% of the data falls entirely in category <em>H</em>.<br>
So a lot of the data is between <em>G</em> and <em>H</em>, with the data being more sparse in the lower and higher categories.</p>
<div class="callout callout-style-simple callout-tip">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p><strong>Looking ahead to numeric data</strong></p>
<p>We will talk about quartiles in numeric data too, where we commonly use the <em>difference</em> between the first and third quartile as a measure of how spread out the data are. This gets known as the <strong>inter-quartile range (IQR).</strong></p>
</div>
</div>
</div>
</section><section id="visualising-1" class="level3 unnumbered"><h3 class="unnumbered anchored" data-anchor-id="visualising-1">Visualising</h3>
<p>We can visualise ordered categorical data in the same way we did for unordered.<br>
First we save our frequencies/percentages as a new object:</p>
<div class="cell">
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">freq_table2</span> <span class="op">&lt;-</span> <span class="va">psych_survey</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">happiness</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    percent <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">*</span><span class="fl">100</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then we give that object to our <strong>ggplot</strong> code, with the appropriate <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> mappings:</p>
<div class="cell">
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># make a ggplot with the object "freq_table2". </span></span>
<span><span class="co"># on the x axis put the possible values in the "happiness" variable,</span></span>
<span><span class="co"># on the y axis put the possible values in the "n" variable.</span></span>
<span><span class="co"># add columns for each entry in the data. </span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">freq_table2</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">happiness</span>, y <span class="op">=</span> <span class="va">percent</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="rd1_02_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="glossary" class="level2" data-number="5"><h2 data-number="5" class="anchored" data-anchor-id="glossary">
<span class="header-section-number">5</span> Glossary</h2>
<ul>
<li>
<strong>distribution:</strong> How often different possible values in a variable occur.</li>
<li>
<strong>frequency:</strong> Number of occurrences (count) in a given response value.</li>
<li>
<strong>relative frequency:</strong> Percentage/proportion of occurrences in a given response value.</li>
<li>
<strong>cumulative percentage:</strong> Percentage of occurrences in <em>or below</em> a given reponse value (requires ordered data).</li>
<li>
<strong>mode:</strong> Most common value.</li>
<li>
<strong>median:</strong> Middle value. <br><br>
</li>
<li>
<code>|&gt;</code> Takes the output of whatever is on the LHS and gives it as the input of whatever is on the RHS.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/count.html">count()</a></code> Counts the number of occurrences of each unique value in a variable.</li>
<li>
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code> Used to add variables to the dataframe, or modify existing variables.</li>
<li>
<code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code> Returns the minimum value of a variable.</li>
<li>
<code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code> Returns the maximum value of a variable.</li>
<li>
<code><a href="https://rdrr.io/r/stats/median.html">median()</a></code> Returns the median value of a variable.</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot()</a></code> Creates a plot. Takes <code>data=</code> and a set of mappings <code><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes()</a></code> from the data to properties of the plot (e.g., x/y axes, colours).</li>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col()</a></code> Adds columns to a ggplot.</li>
</ul>


</section><a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2019-2024 <a href="https://www.ed.ac.uk/">The University of Edinburgh</a>. Site licensed under the <a href="https://www.gnu.org/licenses/agpl-3.0.en.html">GNU AGPLv3</a> license.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>